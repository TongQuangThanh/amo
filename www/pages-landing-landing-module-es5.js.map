{"version":3,"sources":["webpack:///src/app/pages/landing/landing.page.ts","webpack:///src/app/pages/landing/landing.page.html","webpack:///src/app/pages/landing/landing.module.ts"],"names":["PHONE_LENGTH_VN","LandingPage","menu","loading","authService","navCtrl","translateConfigService","apiService","modalController","phoneNumber","errorMessage","errorInputPhone","enable","setDirection","self","getToken","isLoggedIn","present","getUserProfile","subscribe","result","localStorage","setItem","JSON","stringify","profile","dismiss","navigateRoot","error","logout","length","navigateForward","resentRegisterCode","refCode","ref","presentModal","message","sendSMS","create","component","componentProps","cssClass","modal","onDidDismiss","then","dataReturned","dataReturnedResult","parse","data","token","ChangeLogin","SkipLogin","selector","templateUrl","styleUrls","routes","path","LandingPageModule","forChild","imports","declarations"],"mappings":"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","file":"pages-landing-landing-module-es5.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { MenuController, NavController } from '@ionic/angular';\r\nimport { AuthService } from 'src/app/services/auth/auth.service';\r\nimport { TranslateConfigService } from '../../translate-config.service';\r\nimport { NavigationExtras } from '@angular/router';\r\nimport { ApiService } from '../../services/api/api.service';\r\nimport { LoadingService } from '../../services/loading/loading.service';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { PopupPincodeRegisterPage } from '../popup-pincode-register/popup-pincode-register.page';\r\n\r\nconst PHONE_LENGTH_VN = 10;\r\n\r\n@Component({\r\n  selector: 'app-landing',\r\n  templateUrl: './landing.page.html',\r\n  styleUrls: ['./landing.page.scss'],\r\n})\r\nexport class LandingPage implements OnInit {\r\n  phoneNumber: string;\r\n  errorInputPhone: boolean;\r\n  errorMessage:string;\r\n  refCode :string;\r\n  constructor(\r\n    private menu: MenuController,\r\n    private loading: LoadingService,\r\n    private authService: AuthService,\r\n    private navCtrl: NavController,\r\n    private translateConfigService: TranslateConfigService,\r\n    private apiService: ApiService,\r\n    public modalController: ModalController,\r\n  ) {\r\n    this.phoneNumber = '';\r\n    this.errorMessage= \"\";\r\n    this.errorInputPhone = false;\r\n    this.menu.enable(false);\r\n    this.navCtrl.setDirection('back', true, 'back');\r\n\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n    var self = this;\r\n    this.authService.getToken();\r\n    if (this.authService.isLoggedIn) {\r\n      this.loading.present();\r\n      this.apiService.getUserProfile()\r\n        .subscribe(result => {\r\n          localStorage.setItem('profile', JSON.stringify(result.profile));\r\n          self.loading.dismiss()\r\n          self.navCtrl.navigateRoot('/dashboard/home');\r\n      },\r\n      error => {\r\n        self.loading.dismiss();\r\n        self.authService.logout();\r\n      });\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n  checkIsEnabled() {\r\n    if (this.phoneNumber && this.phoneNumber.length >= PHONE_LENGTH_VN) {\r\n      this.errorInputPhone = false;\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  ChangeLogin() {\r\n    //this.navCtrl.navigateForward('/login/' + this.phoneNumber);\r\n    this.navCtrl.navigateForward('/login/');\r\n  }\r\n\r\n  sendSMS(){\r\n    var self = this;\r\n    this.loading.present();\r\n    this.apiService.resentRegisterCode(this.phoneNumber).subscribe(result => {\r\n      self.loading.dismiss();\r\n      self.refCode = result.ref;\r\n      self.presentModal();\r\n    },\r\n    error => {\r\n      self.errorMessage = error.error.message;\r\n      self.loading.dismiss();\r\n    });\r\n  }\r\n\r\n  SkipLogin(){\r\n    if (this.phoneNumber && this.phoneNumber.length >= PHONE_LENGTH_VN) {\r\n      this.errorInputPhone = false;\r\n      this.sendSMS();\r\n    }else{\r\n      this.errorInputPhone = true;\r\n    }\r\n  }\r\n\r\n  async presentModal() {\r\n    const modal = await this.modalController.create({\r\n      component: PopupPincodeRegisterPage,\r\n      componentProps: {\r\n        \"phoneNumber\": this.phoneNumber,\r\n        \"refCode\": this.refCode\r\n      },\r\n      cssClass: \"pincode-modal-custom\"\r\n    });\r\n\r\n    modal.onDidDismiss().then((dataReturned:any) => {\r\n      if (dataReturned !== null) {\r\n        const dataReturnedResult = JSON.parse(dataReturned.data);\r\n        if(dataReturnedResult.result == '0'){\r\n          this.navCtrl.navigateForward('/register-password/' + this.phoneNumber + \"/\" + dataReturnedResult.token + \"/\" + dataReturnedResult.refCode);\r\n        }else{\r\n\r\n        }\r\n      }\r\n    });\r\n\r\n    return await modal.present();\r\n  }\r\n}\r\n","<div class=\"image-logo\">\r\n  <div class=\"center\">\r\n    <ion-img src=\"/assets/icon/AMO_Logo_WhiteBgr.png\" class=\"ion-align-self-end\"></ion-img>\r\n  </div>   \r\n</div>\r\n\r\n<div class=\"landing-white-bg\">\r\n  <div class=\"ion-text-center\">\r\n    <ion-label class=\"label-text-title\">{{ 'LANDING.content_text_title' | translate }}</ion-label>\r\n  </div>\r\n  <div class=\"ion-text-center landing-text\">\r\n    <ion-label class=\"label-text\">{{ 'LANDING.content_text' | translate }}</ion-label>\r\n  </div>\r\n  <ion-button expand=\"block\" class=\"button-common button-next button-common-active\" (click)=\"ChangeLogin()\">\r\n    <ion-label class=\"button-next-label\">{{ 'LANDING.login' | translate }}</ion-label>\r\n  </ion-button>\r\n  <ion-button expand=\"block\" class=\"button-common button-next\" (click)=\"SkipLogin()\">\r\n    <ion-label class=\"button-skip-label\">{{ 'LANDING.skip' | translate }}</ion-label>\r\n  </ion-button>\r\n</div>\r\n<ion-img class=\"image-footer\" src=\"/assets/icon/splash-page.svg\"></ion-img>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { LandingPage } from './landing.page';\r\n// import { LoginPage } from '../auth/login/login.page';\r\n// import { RegisterPage } from '../auth/register/register.page';\r\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LandingPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [LandingPage],\r\n  // entryComponents: [LoginPage, RegisterPage]\r\n})\r\nexport class LandingPageModule {}\r\n"]}