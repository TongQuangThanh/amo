{"version":3,"sources":["./src/app/pages/chat-to-shop/chat-to-shop.page.ts","./src/app/pages/chat-to-shop/chat-to-shop.page.html","./src/app/pages/chat-to-shop/chat-to-shop.module.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAA8D;AACsB;AACxB;AACuB;AACX;AACvB;AACA;AACiB;AACX;;;;;;;;;;;;;ICOjD,0EACE;IAAA,6EAAa;IAAA,qEAA2C;IAAxD,4DAAa;IACb,4EAAY;IAAA,uDAAgB;IAAA,4DAAY;IAC1C,4DAAM;;;IAFc,0DAAwB;IAAxB,0JAAwB;IAC9B,0DAAgB;IAAhB,gFAAgB;;;IAE9B,0EACE;IAAA,gFAAsC;IAAA,uDAAmB;IAAA,4DAAY;IACvE,4DAAM;;;IADkC,0DAAmB;IAAnB,mFAAmB;;;IAE3D,0EACI;IAAA,qEACJ;IAAA,4DAAM;;;IADY,0DAAwB;IAAxB,0JAAwB;;;IAE1C,0EACE;IAAA,gFAAuC;IAAA,uDAAmB;IAAA,4DAAY;IACxE,4DAAM;;;IADmC,0DAAmB;IAAnB,mFAAmB;;;IAE5D,0EACE;IAAA,qEACF;IAAA,4DAAM;;;IADU,0DAAwB;IAAxB,0JAAwB;;;IAf1C,sEACE;IAAA,iHACE;IAGF,iHACE;IAEF,iHACI;IAEJ,iHACE;IAEF,iHACE;IAEJ,4DAAM;;;;IAjBiC,8HAAkD;IAClF,0DAAiF;IAAjF,oJAAiF;IAIjF,0DAAuD;IAAvD,uHAAuD;IAGvD,0DAA+E;IAA/E,kJAA+E;IAG/E,0DAAwD;IAAxD,wHAAwD;IAGxD,0DAAgF;IAAhF,mJAAgF;;;IAmBvF,iFACE;IAAA,qEACF;IAAA,4DAAa;;;;IACb,gFACE;IAD8E,8UAAkC;IAChH,qEACF;IAAA,4DAAa;;ADrCV,MAAM,cAAc;IAQzB,YACS,eAAgC,EAC/B,MAAc,EACf,qBAA4C,EAC3C,OAAuB,EACvB,OAAsB,EACtB,UAAsB,EACtB,KAAqB,EACrB,SAA2B,EAC3B,YAA0B;QAR3B,oBAAe,GAAf,eAAe,CAAiB;QAC/B,WAAM,GAAN,MAAM,CAAQ;QACf,0BAAqB,GAArB,qBAAqB,CAAuB;QAC3C,YAAO,GAAP,OAAO,CAAgB;QACvB,YAAO,GAAP,OAAO,CAAe;QACtB,eAAU,GAAV,UAAU,CAAY;QACtB,UAAK,GAAL,KAAK,CAAgB;QACrB,cAAS,GAAT,SAAS,CAAkB;QAC3B,iBAAY,GAAZ,YAAY,CAAc;QA6JpC,eAAU,GAAG,CAAC,OAAa,EAAE,QAAe,EAAO,EAAE;YACnD,IAAI,CAAC,GAAQ,OAAO,CAAC;YACrB,4FAA4F;YAC5F,CAAC,CAAC,gBAAgB,GAAG,IAAI,IAAI,EAAE,CAAC;YAChC,CAAC,CAAC,IAAI,GAAG,QAAQ,CAAC;YAElB,uBAAuB;YACvB,OAAO,OAAO,CAAC;QACjB,CAAC;IApKG,CAAC;IAEL,QAAQ;QACN,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC;QAC3E,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,SAAS,GAAG;YACf,EAAC,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,iCAAiC,EAAE,OAAO,EAAE,iDAAiD,EAAE,MAAM,EAAE,EAAE,EAAC;YACjI,EAAC,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,iCAAiC,EAAE,OAAO,EAAE,EAAE,EAAE,MAAM,EAAE,iCAAiC,EAAC;YACjH,EAAC,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,iCAAiC,EAAE,OAAO,EAAE,kDAAkD,EAAC;YACvH,EAAC,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,iCAAiC,EAAE,OAAO,EAAE,EAAE,EAAE,MAAM,EAAE,iCAAiC,EAAC;SACnH;QACD,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;QAC1B,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;QAC5B,IAAI,CAAC,yBAAyB,EAAE,CAAC;IACnC,CAAC;IACD,gBAAgB;QACd,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;IACjC,CAAC;IACD,YAAY,CAAC,OAAO;QAClB,IAAI,IAAI,CAAC,SAAS,IAAI,OAAO,CAAC,IAAI,EAAE;YAClC,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,IAAI,CAAC;YAC9B,OAAO,eAAe,CAAC;SACxB;aAAM;YACL,OAAO,EAAE,CAAC;SACX;IACH,CAAC;IACD,yBAAyB;QACvB,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;QACvB,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC;aACrD,SAAS,CAAC,MAAM,CAAC,EAAE;YAClB,MAAM,WAAW,GAAG,MAAM,CAAC,sBAAsB,CAAC;YAClD,WAAW,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;gBAC5B,IAAI,IAAI,GAAG,MAAM,CAAC;gBAClB,IAAI,OAAO,CAAC,SAAS,CAAC,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,GAAG,EAAE;oBAC5D,IAAI,GAAG,OAAO,CAAC;iBAChB;gBACD,IAAI,OAAO,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;oBAClC,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE;wBACxC,IAAI,MAAM,GAAG;4BACX,IAAI,EAAE,IAAI;4BACV,MAAM,EAAE,OAAO,CAAC,SAAS,CAAC,MAAM;4BAChC,IAAI,EAAE,OAAO,CAAC,SAAS,CAAC,WAAW;4BACnC,OAAO,EAAE,EAAE;4BACX,MAAM,EAAE,WAAW,CAAC,GAAG;yBACxB;wBACD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBAC9B,CAAC,CAAC;iBACH;qBAAM;oBACL,IAAI,MAAM,GAAG;wBACX,IAAI,EAAE,IAAI;wBACV,MAAM,EAAE,OAAO,CAAC,SAAS,CAAC,MAAM;wBAChC,IAAI,EAAE,OAAO,CAAC,SAAS,CAAC,WAAW;wBACnC,OAAO,EAAE,OAAO,CAAC,OAAO;wBACxB,MAAM,EAAE,EAAE;qBACX;oBACD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;iBAC7B;YACH,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;YACvB,UAAU,CAAC,GAAG,EAAE;gBACd,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;YACnC,CAAC,EAAE,GAAG,CAAC,CAAC;QAEZ,CAAC,EACD,KAAK,CAAC,EAAE;YACN,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,sBAAsB;QACpB,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,KAAK,GAAG;YACV,cAAc,EAAE,IAAI,CAAC,YAAY,CAAC,GAAG;YACrC,WAAW,EAAE,EAAE;YACf,OAAO,EAAE,IAAI,CAAC,eAAe;SAC9B;QACD,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;QACvB,IAAI,CAAC,UAAU,CAAC,kBAAkB,CAAC,KAAK,CAAC;aACtC,SAAS,CAAC,MAAM,CAAC,EAAE;YAClB,IAAI,CAAC,SAAS,CAAC,IAAI,CACjB,EAAC,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,EAAE,EAAE,OAAO,EAAE,IAAI,CAAC,eAAe,EAAC,CAC3D;YACD,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;YAC1B,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;YACvB,UAAU,CAAC,GAAG,EAAE;gBACd,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;YACnC,CAAC,EAAE,GAAG,CAAC,CAAC;QACZ,CAAC,EACD,KAAK,CAAC,EAAE;YACN,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;YACvB,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,mBAAmB,CAAC,CAAC;QACtD,CAAC,CAAC,CAAC;IACL,CAAC;IAED,cAAc;QACZ,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,eAAe,GAAG,EAAE,CAAC;QACzB,IAAI,eAAe,GAAG,EAAE,CAAC;QACzB,KAAI,IAAI,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAC,CAAC,EAAE,EAAC;YAC9C,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;YACtD,eAAe,CAAC,IAAI,CAAC;gBACnB,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG;aACpF,CAAC,CAAC;SACJ;QACD,IAAI,KAAK,GAAG;YACV,cAAc,EAAE,IAAI,CAAC,YAAY,CAAC,GAAG;YACrC,WAAW,EAAE,eAAe;YAC5B,OAAO,EAAE,GAAG;SACb;QACD,IAAI,eAAe,CAAC,MAAM,IAAI,CAAC;YAAE,OAAO;QACxC,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;QACvB,IAAI,CAAC,UAAU,CAAC,kBAAkB,CAAC,KAAK,CAAC;aACtC,SAAS,CAAC,MAAM,CAAC,EAAE;YAClB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;YACxD,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;YAC5B,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;YACvB,UAAU,CAAC,GAAG,EAAE;gBACd,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;YACnC,CAAC,EAAE,GAAG,CAAC,CAAC;QACZ,CAAC,EACD,KAAK,CAAC,EAAE;YACN,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;YACvB,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,iBAAiB,CAAC,CAAC;QACpD,CAAC,CAAC,CAAC;IACL,CAAC;IAED,eAAe;IACT,WAAW;;YACf,MAAM,WAAW,GAAG,MAAM,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC;gBAC1D,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,gCAAgC,CAAC;gBAChE,OAAO,EAAE,CAAC;wBACR,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,kCAAkC,CAAC;wBAChE,OAAO,EAAE,GAAG,EAAE;4BACZ,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC;wBAC1E,CAAC;qBACF;oBACD;wBACE,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,iCAAiC,CAAC;wBAC/D,OAAO,EAAE,GAAG,EAAE;4BACZ,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;wBACpE,CAAC;qBACF;oBACD;wBACE,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,iCAAiC,CAAC;wBAC/D,IAAI,EAAE,QAAQ;qBACf;iBACA;aACF,CAAC,CAAC;YACH,MAAM,WAAW,CAAC,OAAO,EAAE,CAAC;QAC9B,CAAC;KAAA;IAED,sBAAsB,CAAC,UAA8B;QACnD,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;IAC7B,CAAC;IAYD,SAAS,CAAC,UAAU;QAClB,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,MAAM,OAAO,GAAkB;YAC7B,OAAO,EAAE,EAAE;YACX,UAAU,EAAE,UAAU;YACtB,eAAe,EAAE,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,QAAQ;YACrD,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI;YAC3C,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO;YACxC,WAAW,EAAE,GAAG;YAChB,YAAY,EAAE,GAAG;YACjB,kBAAkB,EAAE,IAAI;SACzB;QAED,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,SAAS,EAAE,EAAE;YAEjD,MAAM,YAAY,GAAG,yBAAyB,CAAC;YAC/C,IAAI,UAAU,GAAG,IAAI,CAAC,mBAAmB,CAAC,YAAY,GAAC,SAAS,CAAC,CAAC;YAClE,MAAM,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC;YAClC,MAAM,QAAQ,GAAG,IAAI,QAAQ,EAAE,CAAC;YAChC,IAAI,QAAQ,GAAG,QAAQ,GAAG,IAAI,GAAG,MAAM,CAAC;YACxC,IAAI,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;YACnD,MAAM,OAAO,GAAG,IAAI,QAAQ,EAAE,CAAC;YAC/B,OAAO,CAAC,MAAM,CAAC,OAAO,EAAE,UAAU,EAAE,QAAQ,CAAC,CAAC;YAE9C,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,OAAO,CAAC;iBACnC,SAAS,CAAC,MAAM,CAAC,EAAE;gBAClB,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;gBAC5B,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBACpC,IAAI,CAAC,cAAc,EAAE,CAAC;YACxB,CAAC,EACC,KAAK,CAAC,EAAE;YACV,CAAC,CAAC,CAAC;QACL,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,GAAE,CAAC,CAAC,CAAC;IAClB,CAAC;IAEO,mBAAmB,CAAC,MAAc;QACxC,MAAM,IAAI,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;QAC5C,MAAM,SAAS,GAAG,GAAG,CAAC;QACtB,MAAM,cAAc,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACnD,MAAM,UAAU,GAAG,EAAE,CAAC;QAEtB,KAAK,IAAI,MAAM,GAAG,CAAC,EAAE,MAAM,GAAG,cAAc,CAAC,MAAM,EAAE,MAAM,IAAI,SAAS,EAAE;YACxE,MAAM,KAAK,GAAG,cAAc,CAAC,KAAK,CAAC,MAAM,EAAE,MAAM,GAAG,SAAS,CAAC,CAAC;YAC/D,MAAM,WAAW,GAAG,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;YAE5C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACrC,WAAW,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;aACtC;YAED,UAAU,CAAC,IAAI,CAAC,IAAI,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC;SAC9C;QAED,OAAO,IAAI,IAAI,CAAC,UAAU,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;IACnD,CAAC;IAEO,iBAAiB,CAAC,MAAc;QACtC,MAAM,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAClC,MAAM,SAAS,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;QAC1D,MAAM,IAAI,GAAG,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;QACvC,MAAM,SAAS,GAAG,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;QAE7C,OAAO;YACL,IAAI;YACJ,SAAS;YACT,IAAI;YACJ,SAAS;SACV,CAAC;IACJ,CAAC;;4EA3PU,cAAc;8FAAd,cAAc;;;;;;QCf3B,gFACE;QAAA,iFACE;QAAA,gFAAuF;QACzF,4DAAc;QACd,+EAAgC;QAAA,uDAAsB;QAAA,4DAAY;QAOpE,4DAAa;QACb,uFACE;QAAA,8EACE;QAAA,0GACE;QAiBJ,4DAAW;QACb,4DAAc;QACd,6EACE;QAAA,0EACE;QAAA,iFACE;QADgD,2IAAS,iBAAa,IAAC;QACvE,sEACF;QAAA,4DAAa;QACf,4DAAM;QACN,2EACE;QAAA,oFAGgB;QADd,mMAA6B;;QAC9B,4DAAe;QAClB,4DAAM;QACN,0EACE;QAAA,2HACE;QAEF,2HACE;QAEJ,4DAAM;QACR,4DAAU;;QAlDwB,0DAAsB;QAAtB,uFAAsB;QAU/C,0DAAiC;QAAjC,kFAAiC;QA4BpC,0DAAgE;QAAhE,sLAAgE;QAChE,wFAA6B;QAImB,0DAA6B;QAA7B,2FAA6B;QAG7B,0DAA6B;QAA7B,2FAA6B;;6FDnCtE,cAAc;cAL1B,uDAAS;eAAC;gBACT,QAAQ,EAAE,kBAAkB;gBAC5B,WAAW,EAAE,0BAA0B;gBACvC,SAAS,EAAE,CAAC,0BAA0B,CAAC;aACxC;;kBAEE,uDAAS;mBAAC,SAAS;;;;;;;;;;;;;;AEhBtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyC;AACM;AACF;AACU;AAEV;AACQ;AACkB;AACX;;;AAE5D,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,iEAAc;KAC1B;CACF,CAAC;AAaK,MAAM,oBAAoB;;mGAApB,oBAAoB;kKAApB,oBAAoB,kBAVtB;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,mEAAe;YACf,yEAAe;YACf,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;SAC9B;mIAGU,oBAAoB,mBAFhB,iEAAc,aAP3B,4DAAY;QACZ,0DAAW;QACX,0DAAW;QACX,mEAAe;QACf,yEAAe;6FAKN,oBAAoB;cAXhC,sDAAQ;eAAC;gBACR,OAAO,EAAE;oBACP,4DAAY;oBACZ,0DAAW;oBACX,0DAAW;oBACX,mEAAe;oBACf,yEAAe;oBACf,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;iBAC9B;gBACD,YAAY,EAAE,CAAC,iEAAc,CAAC;aAC/B","file":"pages-chat-to-shop-chat-to-shop-module-es2015.js","sourcesContent":["import { Component, OnInit, ViewChild  } from '@angular/core';\r\nimport { Camera, CameraOptions, PictureSourceType } from '@ionic-native/Camera/ngx';\r\nimport { ApiService } from '../../services/api/api.service';\r\nimport { ActionSheetController, NavController, IonContent  } from '@ionic/angular';\r\nimport { LoadingService } from '../../services/loading/loading.service';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { AlertService } from '../../services/alert/alert.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\n@Component({\r\n  selector: 'app-chat-to-shop',\r\n  templateUrl: './chat-to-shop.page.html',\r\n  styleUrls: ['./chat-to-shop.page.scss'],\r\n})\r\nexport class ChatToShopPage implements OnInit {\r\n  @ViewChild('content') private content: any;\r\n  data_history: any;\r\n  data_chat: any;\r\n  message_content: any;\r\n  list_image_select: any;\r\n  flag_user: any;\r\n\r\n  constructor(\r\n    public modalController: ModalController,\r\n    private camera: Camera,\r\n    public actionSheetController: ActionSheetController,\r\n    private loading: LoadingService,\r\n    private navCtrl: NavController,\r\n    private apiService: ApiService,\r\n    private route: ActivatedRoute,\r\n    private translate: TranslateService,\r\n    private alertService: AlertService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.data_history = JSON.parse(localStorage.getItem('data-order-history'));\r\n    this.flag_user = \"\";\r\n    this.data_chat = [\r\n      {type: 'left', avatar: \"../assets/images/services/9.jpg\", message: \"Chào ban, chúng tôi có thể giúp gì được cho bạn\", images: \"\"},\r\n      {type: 'left', avatar: \"../assets/images/services/9.jpg\", message: \"\", images: \"../assets/images/services/9.jpg\"},\r\n      {type: 'right', avatar: \"../assets/images/services/9.jpg\", message: \"Tôi đặt hàng lâu rồi mà không thấy shop giao đến\"},\r\n      {type: 'right', avatar: \"../assets/images/services/9.jpg\", message: \"\", images: \"../assets/images/services/9.jpg\"},\r\n    ]\r\n    this.message_content = \"\";\r\n    this.list_image_select = [];\r\n    this.getAllOrderHistoryComment();\r\n  }\r\n  ionViewWillEnter(){\r\n    this.content.scrollToBottom(0);\r\n  }\r\n  getMarginTop(message) {\r\n    if (this.flag_user != message.type) {\r\n      this.flag_user = message.type;\r\n      return 'margin-top-20';\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n  getAllOrderHistoryComment() {\r\n    var self = this;\r\n    this.data_chat = [];\r\n    this.loading.present();\r\n    this.apiService.getcommentOrderV2(this.data_history._id)\r\n      .subscribe(result => {\r\n        const listComment = result.orderHistoryCommentsV2;\r\n        listComment.forEach(comment => {\r\n          let type = 'left';\r\n          if (comment.createdBy._id == self.data_history.createdBy._id) {\r\n            type = 'right';\r\n          }\r\n          if (comment.attachments.length > 0) {\r\n            comment.attachments.forEach(attachments => {\r\n              let object = {\r\n                type: type, \r\n                avatar: comment.createdBy.avatar,\r\n                name: comment.createdBy.displayName,\r\n                message: \"\", \r\n                images: attachments.url\r\n              }\r\n              self.data_chat.push(object);\r\n            })\r\n          } else {\r\n            let object = {\r\n              type: type, \r\n              avatar: comment.createdBy.avatar,\r\n              name: comment.createdBy.displayName,\r\n              message: comment.content, \r\n              images: \"\"\r\n            }\r\n            self.data_chat.push(object);\r\n          }\r\n        });\r\n        self.loading.dismiss();\r\n        setTimeout(() => {\r\n          self.content.scrollToBottom(100);\r\n        }, 200);\r\n        \r\n    },\r\n    error => {\r\n      self.loading.dismiss();\r\n    });\r\n  }\r\n  eventButtonSendMessage() {\r\n    var self = this;\r\n    var param = {\r\n      orderHistoryId: this.data_history._id,\r\n      attachments: [],\r\n      content: self.message_content\r\n    }\r\n    this.loading.present();\r\n    this.apiService.postCommentOrderV2(param)\r\n      .subscribe(result => {\r\n        self.data_chat.push(\r\n          {type: 'right', avatar: \"\", message: self.message_content}\r\n        )\r\n        self.message_content = \"\";\r\n        self.loading.dismiss();\r\n        setTimeout(() => {\r\n          self.content.scrollToBottom(100);\r\n        }, 200);\r\n    },\r\n    error => {\r\n      self.loading.dismiss();\r\n      self.alertService.presentToast('Send message fail');\r\n    });\r\n  }\r\n\r\n  eventSendImage() {\r\n    var self = this;\r\n    let listAttachments = [];\r\n    let data_chat_image = [];\r\n    for(var i=0;i<self.list_image_select.length;i++){\r\n      listAttachments.push(self.list_image_select[i].media);\r\n      data_chat_image.push({\r\n        type: 'right', avatar: \"\", message: \"\", images: self.list_image_select[i].media.url\r\n      });\r\n    }\r\n    var param = {\r\n      orderHistoryId: this.data_history._id,\r\n      attachments: listAttachments,\r\n      content: \" \"\r\n    }\r\n    if (listAttachments.length == 0) return;\r\n    this.loading.present();\r\n    this.apiService.postCommentOrderV2(param)\r\n      .subscribe(result => {\r\n        self.data_chat = self.data_chat.concat(data_chat_image);\r\n        self.list_image_select = [];\r\n        self.loading.dismiss();\r\n        setTimeout(() => {\r\n          self.content.scrollToBottom(100);\r\n        }, 300);\r\n    },\r\n    error => {\r\n      self.loading.dismiss();\r\n      self.alertService.presentToast('Send image fail');\r\n    });\r\n  }\r\n\r\n  // select image\r\n  async selectImage() {\r\n    const actionSheet = await this.actionSheetController.create({\r\n      header: this.translate.instant('COMMON.form_select_image_title'),\r\n      buttons: [{\r\n        text: this.translate.instant('COMMON.form_select_image_library'),\r\n        handler: () => {\r\n          this.checkPicturePermission(this.camera.PictureSourceType.PHOTOLIBRARY);\r\n        }\r\n      },\r\n      {\r\n        text: this.translate.instant('COMMON.form_select_image_camera'),\r\n        handler: () => {\r\n          this.checkPicturePermission(this.camera.PictureSourceType.CAMERA);\r\n        }\r\n      },\r\n      {\r\n        text: this.translate.instant('COMMON.form_select_image_cancel'),\r\n        role: 'cancel'\r\n      }\r\n      ]\r\n    });\r\n    await actionSheet.present();\r\n  }\r\n\r\n  checkPicturePermission(sourceType : PictureSourceType) {\r\n    this.pickImage(sourceType);\r\n  }\r\n\r\n  blobToFile = (theBlob: Blob, fileName:string): any => {\r\n    var b: any = theBlob;\r\n    //A Blob() is almost a File() - it's just missing the two properties below which we will add\r\n    b.lastModifiedDate = new Date();\r\n    b.name = fileName;\r\n\r\n    //Cast to a File() type\r\n    return theBlob;\r\n  }\r\n\r\n  pickImage(sourceType) {\r\n    var self = this;\r\n    const options: CameraOptions = {\r\n      quality: 80,\r\n      sourceType: sourceType,\r\n      destinationType: this.camera.DestinationType.DATA_URL,\r\n      encodingType: this.camera.EncodingType.JPEG,\r\n      mediaType: this.camera.MediaType.PICTURE,\r\n      targetWidth: 800,\r\n      targetHeight: 800,\r\n      correctOrientation: true,\r\n    }\r\n    \r\n    this.camera.getPicture(options).then((imageData) => {\r\n    \r\n      const base64Define = 'data:image/jpeg;base64,';\r\n      var binaryBlob = this.convertBase64ToBlob(base64Define+imageData);\r\n      const date = new Date().valueOf();\r\n      const formData = new FormData();\r\n      var fileName = \"amoapp\" + date + \".jpg\";\r\n      var myFile = self.blobToFile(binaryBlob, fileName);\r\n      const payload = new FormData();\r\n      payload.append('media', binaryBlob, fileName);\r\n\r\n      this.apiService.uploadImage(payload)\r\n      .subscribe(result => {\r\n        self.list_image_select = [];\r\n        self.list_image_select.push(result);\r\n        self.eventSendImage();\r\n      },\r\n        error => {\r\n      });\r\n    }, (err) => {});\r\n  }\r\n\r\n  private convertBase64ToBlob(base64: string) {\r\n    const info = this.getInfoFromBase64(base64);\r\n    const sliceSize = 512;\r\n    const byteCharacters = window.atob(info.rawBase64);\r\n    const byteArrays = [];\r\n\r\n    for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\r\n      const slice = byteCharacters.slice(offset, offset + sliceSize);\r\n      const byteNumbers = new Array(slice.length);\r\n\r\n      for (let i = 0; i < slice.length; i++) {\r\n        byteNumbers[i] = slice.charCodeAt(i);\r\n      }\r\n\r\n      byteArrays.push(new Uint8Array(byteNumbers));\r\n    }\r\n\r\n    return new Blob(byteArrays, { type: info.mime });\r\n  }\r\n\r\n  private getInfoFromBase64(base64: string) {\r\n    const meta = base64.split(',')[0];\r\n    const rawBase64 = base64.split(',')[1].replace(/\\s/g, '');\r\n    const mime = /:([^;]+);/.exec(meta)[1];\r\n    const extension = /\\/([^;]+);/.exec(meta)[1];\r\n\r\n    return {\r\n      mime,\r\n      extension,\r\n      meta,\r\n      rawBase64\r\n    };\r\n  }\r\n}\r\n","<ion-header class=\"order-chat-header\">\r\n  <ion-buttons class=\"back-button\">\r\n    <ion-back-button text=\"\" icon=\"chevron-back\" class=\"ion-back-button\"></ion-back-button>\r\n  </ion-buttons>\r\n  <ion-label class=\"header-title\">{{data_history.title}}</ion-label>\r\n  <!-- <ion-toolbar>\r\n    <ion-title>{{data_history.title}}</ion-title>\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button text=\"\" icon=\"chevron-back\"></ion-back-button>\r\n    </ion-buttons>\r\n  </ion-toolbar> -->\r\n</ion-header>\r\n<ion-content #content>\r\n  <ion-list lines=\"full\" class=\"ion-no-margin ion-no-padding padding-top-10 padding-bottom-20 ion-list-class\">\r\n    <div *ngFor=\"let message of data_chat\" class=\"ion-item-message {{getMarginTop(message)}}\">\r\n      <div *ngIf=\"message.type == 'left' && (message.message != '' || message.images != '')\" class=\"div-avatar\">\r\n        <ion-avatar> <img src=\"{{message.avatar}}\"></ion-avatar>\r\n        <ion-label >{{message.name}}</ion-label>\r\n      </div>\r\n      <div *ngIf=\"message.type == 'left' && message.message != ''\" class=\"col-7 div-label-message-left\">\r\n        <ion-label class=\"label-message-left\">{{message.message}}</ion-label>\r\n      </div>\r\n      <div *ngIf=\"message.type == 'left' && message.message == '' && message.images != ''\" class=\"col-7 div-image-message-left\">\r\n          <img class=\"\" src=\"{{message.images}}\"/>\r\n      </div>\r\n      <div *ngIf=\"message.type == 'right' && message.message != ''\" class=\"col-7 div-label-message-right\" slot=\"end\">\r\n        <ion-label class=\"label-message-right\">{{message.message}}</ion-label>\r\n      </div>\r\n      <div *ngIf=\"message.type == 'right' && message.message == '' && message.images != ''\" class=\"col-7 div-image-message-right\" slot=\"end\">\r\n        <img class=\"\" src=\"{{message.images}}\"/>\r\n      </div>\r\n    </div>\r\n  </ion-list>\r\n</ion-content>\r\n<section class=\"full-width function-section shadow-section center-div\">\r\n  <div class=\"col-2 center-div\">\r\n    <ion-button expand=\"block\" class=\"button-section\" (click)=\"selectImage()\">\r\n      <img class=\"icon-select-image\" src=\"../assets/icon/svg/icon-select-image.svg\"/>\r\n    </ion-button>\r\n  </div>\r\n  <div class=\"col-8 center-div div-text-area-1\">\r\n    <ion-textarea class=\"text-area-1\" auto-grow=\"true\" rows=\"1\"\r\n      placeholder=\"{{ 'SEVICE_10.placeholder_textarea' | translate }}\"\r\n      [(ngModel)]=\"message_content\"\r\n    ></ion-textarea>\r\n  </div>\r\n  <div class=\"col-2 center-div\">\r\n    <ion-button expand=\"block\" class=\"button-section\" *ngIf=\"message_content == ''\">\r\n      <img class=\"icon-send-inactive\" src=\"../assets/icon/svg/icon-send-inactive.svg\"/>\r\n    </ion-button>\r\n    <ion-button expand=\"block\" class=\"button-section\" *ngIf=\"message_content != ''\" (click)=\"eventButtonSendMessage()\">\r\n      <img class=\"icon-send-active\" src=\"../assets/icon/svg/icon-send-active.svg\"/>\r\n    </ion-button>\r\n  </div>\r\n</section>\r\n  ","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { ChatToShopPage } from './chat-to-shop.page';\r\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\r\nimport { SuperTabsModule } from '@ionic-super-tabs/angular';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ChatToShopPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    SuperTabsModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [ChatToShopPage]\r\n})\r\nexport class ChatToShopPageModule {}\r\n"],"sourceRoot":"webpack:///"}