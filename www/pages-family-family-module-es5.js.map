{"version":3,"sources":["webpack:///src/app/pages/family/family.module.ts","webpack:///src/app/pages/family/family.page.html","webpack:///src/app/pages/family/family.page.ts"],"names":["routes","path","component","FamilyPageModule","forChild","imports","declarations","FamilyPage","translate","loading","platform","alertService","apiService","navCtrl","route","nativePageTransitions","modalController","vehicleEnable","memberEnable","ready","then","readySource","heightScreen","height","apartmentID","snapshot","paramMap","get","_apartmentID","getListUserApar","self","present","getUserApartment","subscribe","result","apartment","userApartment","listMembers","convertData","members","dismiss","error","listdata","forEach","element","dateOfBirth","undefined","ageDifMs","Date","now","getTime","ageDate","Math","abs","getUTCFullYear","event","user_id","currentTarget","className","indexOf","id","navigateForward","create","componentProps","cssClass","modal","goToFamilyMemberDetail","selector","templateUrl","styleUrls"],"mappings":"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","file":"pages-family-family-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { FamilyPage } from './family.page';\r\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: FamilyPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [FamilyPage]\r\n})\r\nexport class FamilyPageModule {}\r\n","<ion-header class=\"ion-no-border\">\r\n  <ion-toolbar>\r\n    <ion-title>{{ 'APARTMENT_FAMILY.title' | translate }}</ion-title>\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button text=\"\"></ion-back-button>\r\n    </ion-buttons>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content class=\"list-family-content\" [style.height.px]=\"heightScreen\">\r\n  <!-- <ion-refresher slot=\"fixed\" (ionRefresh)=\"doRefresh($event)\">\r\n      <ion-refresher-content\r\n      pullingIcon=\"arrow-dropdown\"\r\n      pullingText=\"{{ 'PAYMENT.pull_to_refresh' | translate }}\"\r\n      refreshingSpinner=\"circles\"\r\n      refreshingText=\"Refreshing...\">\r\n      </ion-refresher-content>\r\n  </ion-refresher> -->\r\n  <ion-list class=\"list-view-custom\">\r\n    <ion-item-sliding class=\"padding-left-x\" *ngFor=\"let item of listMembers\" (click)=\"goToFamilyMemberDetail($event)\" id=\"{{item._id}}\">\r\n      <ion-item>\r\n        <ion-avatar slot=\"start\">\r\n          <img src=\"../../../assets/icon/avatar-default.png\">\r\n        </ion-avatar>\r\n        <ion-label>\r\n          <!-- <ion-label class=\"name-family-item\">{{item.name}}<ion-icon class=\"phone-icon\" name=\"md-tablet-portrait\"></ion-icon></ion-label> -->\r\n          <ion-label class=\"name-family-item\">{{item.name}}</ion-label>\r\n          <ion-label class=\"gender-family-item\">{{item.gender}}</ion-label>\r\n          <ion-label class=\"flex-family-item\">\r\n            <ion-label class=\"years-family-item\">{{item.age}} {{'APARTMENT_FAMILY.title_age' | translate}}</ion-label>\r\n            <ion-label class=\"phone-family-item\"><ion-label class=\"float-right flex-family-item\"><ion-icon class=\"icon-phone\" name=\"call\"></ion-icon> {{item.phone}}</ion-label></ion-label>\r\n          </ion-label>\r\n        </ion-label>\r\n      </ion-item>\r\n      <ion-item-options>\r\n          <!-- <button primary class=\"btn-edit\"><p class=\"label-edit text-button\">{{'APARTMENT_FAMILY.btn_edit' | translate}}</p></button> -->\r\n          <button danger (click)=\"presentModal()\" class=\"btn-delete text-button\"><p>{{'APARTMENT_FAMILY.btn_delete' | translate}}</p></button>\r\n      </ion-item-options>\r\n    </ion-item-sliding>\r\n\r\n    <!-- <ion-item class=\"list-family-item\" lines=\"none\" *ngFor=\"let item of listMembers\"\r\n      (click)=\"detailPage($event)\" id=\"{{item._id}}\">\r\n      <ion-avatar slot=\"start\">\r\n        <img src=\"../../../assets/icon/avatar-default.png\">\r\n      </ion-avatar>\r\n      <ion-label>\r\n        <ion-label class=\"name-family-item\">{{item.name}}<ion-icon class=\"phone-icon\" name=\"md-tablet-portrait\"></ion-icon></ion-label>\r\n        <ion-label class=\"gender-family-item\">{{item.gender}}</ion-label>\r\n        <ion-label class=\"flex-family-item\">\r\n          <ion-label class=\"years-family-item\">{{item.age}} {{'APARTMENT_FAMILY.title_age' | translate}}</ion-label>\r\n          <ion-label class=\"phone-family-item\"><ion-label class=\"float-right\">{{item.phone}}</ion-label></ion-label>\r\n        </ion-label>\r\n      </ion-label>\r\n    </ion-item> -->\r\n\r\n    \r\n  </ion-list>\r\n\r\n\r\n  <!-- <ion-infinite-scroll threshold=\"50px\" (ionInfinite)=\"loadData($event)\">\r\n    <ion-infinite-scroll-content class=\"custom-infinite-scroll\" loadingSpinner=\"bubbles\"\r\n      loadingText=\"{{ 'PAYMENT.loadding_more' | translate }}\">\r\n    </ion-infinite-scroll-content>\r\n  </ion-infinite-scroll> -->\r\n  <section class=\"full-width function-section\">\r\n    <ion-button expand=\"block\" class=\"amo-button-custom\" (click)=\"goToFamilyMemberDetail('0')\">{{ 'APARTMENT_FAMILY.btn_add_new' | translate }}</ion-button>\r\n  </section>\r\n</ion-content>\r\n\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Platform, NavController } from '@ionic/angular';\r\nimport { ApiService } from '../../services/api/api.service';\r\nimport { NativePageTransitions, NativeTransitionOptions } from '@ionic-native/native-page-transitions/ngx';\r\nimport { LoadingService } from '../../services/loading/loading.service';\r\nimport { ConstService } from '../../utils/const.service';\r\nimport { UtilsService } from '../../utils/utils.service';\r\nimport { AlertService } from '../../services/alert/alert.service'\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { ConfirmModalPage } from '../../components/confirm-modal/confirm-modal.page';\r\nimport { ApartmentCodeRegisterPage } from '../auth/apartment-code-register/apartment-code-register.page';\r\n\r\n@Component({\r\n  selector: 'app-family',\r\n  templateUrl: './family.page.html',\r\n  styleUrls: ['./family.page.scss'],\r\n})\r\nexport class FamilyPage implements OnInit {\r\n\r\n  heightScreen: number;\r\n  // data\r\n  currentPage: number;\r\n  numberRecordOnPage: number;\r\n  apartment: any;\r\n  listVehicle: any;\r\n  vehicleEnable: boolean= false;\r\n  listMembers:any;\r\n  apartmentTitle:string;\r\n  memberEnable: boolean= false;\r\n  _apartmentID: any;\r\n\r\n  constructor(\r\n    private translate: TranslateService,\r\n    private loading: LoadingService,\r\n    private platform: Platform,\r\n    private alertService: AlertService,\r\n    private apiService: ApiService,\r\n    private navCtrl: NavController,\r\n    private route: ActivatedRoute,\r\n    private nativePageTransitions: NativePageTransitions,\r\n    public modalController: ModalController) {\r\n\r\n    platform.ready().then((readySource) => {\r\n      this.heightScreen = platform.height() - 200 - 44 - 50;\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    const apartmentID = this.route.snapshot.paramMap.get('id');\r\n    this._apartmentID = apartmentID;\r\n    this.getListUserApar(apartmentID);\r\n  }\r\n  getListUserApar(apartmentID: string){\r\n    var self = this;\r\n    this.loading.present();\r\n    this.apiService.getUserApartment(apartmentID)\r\n      .subscribe(result => {\r\n        self.apartment = result.userApartment;\r\n        self.listMembers = self.convertData(self.apartment.apartment.members);\r\n        self.loading.dismiss()\r\n    },\r\n    error => {\r\n      self.loading.dismiss();\r\n    });\r\n  }\r\n  convertData(listdata: any) {\r\n    listdata.forEach(element => {\r\n      if (element.dateOfBirth != undefined) {\r\n        var ageDifMs = Date.now() - new Date(element.dateOfBirth).getTime();\r\n        var ageDate = new Date(ageDifMs); // miliseconds from epoch\r\n        element['age'] = Math.abs(ageDate.getUTCFullYear() - 1970);\r\n      } else {\r\n        element['age'] = \"N/A\";\r\n      }\r\n    });\r\n    return listdata;\r\n  }\r\n  removeItem() {\r\n  }\r\n  goToFamilyMemberDetail(event) {\r\n    var user_id = \"0\";\r\n    if (event == '0') {\r\n      user_id = event;\r\n    } else {\r\n      if (event.currentTarget.className.indexOf(\"item-sliding-active-slide\") >= 0) {\r\n        return;\r\n      }\r\n      user_id = event.currentTarget.id;\r\n    }\r\n    this.navCtrl.navigateForward('/family-detail/' + this._apartmentID + \"/\" + user_id);\r\n  }\r\n\r\n  async presentModal() {\r\n    const modal = await this.modalController.create({\r\n      component: ConfirmModalPage,\r\n      componentProps: {\r\n      },\r\n      cssClass: \"custom-comfirm-modal\"\r\n    });\r\n    return await modal.present();\r\n  }\r\n}\r\n\r\n\r\n"]}