{"version":3,"sources":["webpack:///src/app/pages/popup-rating-shop/popup-rating-shop.page.ts","webpack:///src/app/pages/popup-rating-shop/popup-rating-shop.page.html"],"names":["PopupRatingShopPage","modalController","translate","apiService","loading","navParams","alertService","message","orderHistoryId","rating_value_popup","data","dismiss","value","toString","convert1","convert2","count1","length","i","count2","self","present","data_rate","putOrderProductRateStarShop","subscribe","result","presentToast","instant","error","closeModal","selector","templateUrl","styleUrls"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACcc;;;;;;AAIA;;;;;;AAIA;;;;;;AAIA;;;;;;AAIA;;;;;;AAcR;;AAEE;;AAAuC;;;;AAAwC;;AACjF;;;;AADyC;;AAAA;;;;;;;;AAEzC;;AAC6E;AAAA;;AAAA;;AAAA;AAAA;;AAC3E;;AAAuC;;;;AAAwC;;AACjF;;;;AADyC;;AAAA;;;;UDtClCA,mB;AAKX,qCACUC,eADV,EAEUC,SAFV,EAGUC,UAHV,EAIUC,OAJV,EAKUC,SALV,EAMUC,YANV,EAMoC;AAAA;;AAL1B,eAAAL,eAAA,GAAAA,eAAA;AACA,eAAAC,SAAA,GAAAA,SAAA;AACA,eAAAC,UAAA,GAAAA,UAAA;AACA,eAAAC,OAAA,GAAAA,OAAA;AACA,eAAAC,SAAA,GAAAA,SAAA;AACA,eAAAC,YAAA,GAAAA,YAAA;AAVV,eAAAC,OAAA,GAAkB,EAAlB;AACA,eAAAC,cAAA,GAAiB,EAAjB;AACA,eAAAC,kBAAA,GAAqB,EAArB;AASI;;;;qCAEO;AACT,iBAAKD,cAAL,GAAsB,KAAKH,SAAL,CAAeK,IAAf,CAAoBF,cAA1C;AACD;;;uCAEY;AACX,iBAAKP,eAAL,CAAqBU,OAArB;AACD;;;6CAEkBC,K,EAAO;AACxBA,iBAAK,GAAGA,KAAK,CAACC,QAAN,EAAR;AACA,gBAAIC,QAAQ,GAAG,EAAf;AACA,gBAAIC,QAAQ,GAAG,EAAf;AACA,gBAAIC,MAAM,GAAGJ,KAAK,CAACK,MAAnB;;AACA,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIF,MAArB,EAA6BE,CAAC,EAA9B,EAAkC;AAChC,kBAAIA,CAAC,GAAG,CAAJ,IAAS,CAAT,IAAcA,CAAC,IAAIF,MAAvB,EAA+B;AAC7BF,wBAAQ,GAAGA,QAAQ,GAAGF,KAAK,CAACI,MAAM,GAAGE,CAAV,CAAhB,GAA+B,GAA1C;AACD,eAFD,MAEO;AACLJ,wBAAQ,GAAGA,QAAQ,GAAGF,KAAK,CAACI,MAAM,GAAGE,CAAV,CAA3B;AACD;AACF;;AACD,gBAAIC,MAAM,GAAGL,QAAQ,CAACG,MAAtB;;AACA,iBAAK,IAAIC,EAAC,GAAG,CAAb,EAAgBA,EAAC,IAAIC,MAArB,EAA6BD,EAAC,EAA9B,EAAkC;AAChCH,sBAAQ,GAAGA,QAAQ,GAAGD,QAAQ,CAACK,MAAM,GAAGD,EAAV,CAA9B;AACD;;AACD,mBAAOH,QAAP;AACD;;;4CAEiB;AAAA;;AAChB,gBAAIK,IAAI,GAAG,IAAX;AACA,iBAAKhB,OAAL,CAAaiB,OAAb;AACA,gBAAIC,SAAS,GAAG,CAAhB;;AACA,gBAAIF,IAAI,CAACX,kBAAL,GAA0B,EAA9B,EAAkC;AAChCa,uBAAS,GAAG,CAAZ;AACD,aAFD,MAEO,IAAIF,IAAI,CAACX,kBAAL,GAA0B,EAA9B,EAAkC;AACvCa,uBAAS,GAAG,CAAZ;AACD,aAFM,MAEA,IAAIF,IAAI,CAACX,kBAAL,GAA0B,EAA9B,EAAkC;AACvCa,uBAAS,GAAG,CAAZ;AACD,aAFM,MAEA,IAAIF,IAAI,CAACX,kBAAL,GAA0B,EAA9B,EAAkC;AACvCa,uBAAS,GAAG,CAAZ;AACD,aAFM,MAEA,IAAIF,IAAI,CAACX,kBAAL,GAA0B,CAA9B,EAAiC;AACtCa,uBAAS,GAAG,CAAZ;AACD,aAFM,MAEA;AACLA,uBAAS,GAAG,CAAZ;AACD;;AACD,iBAAKnB,UAAL,CAAgBoB,2BAAhB,CAA4CH,IAAI,CAACZ,cAAjD,EAAiEc,SAAjE,EAA4EF,IAAI,CAACb,OAAjF,EAA0FiB,SAA1F,CACE,UAACC,MAAD,EAAY;AACVL,kBAAI,CAACd,YAAL,CAAkBoB,YAAlB,CAA+B,KAAI,CAACxB,SAAL,CAAeyB,OAAf,CAAuB,kCAAvB,CAA/B;AACAP,kBAAI,CAAChB,OAAL,CAAaO,OAAb;;AACA,mBAAI,CAACV,eAAL,CAAqBU,OAArB;AACD,aALH,EAME,UAACiB,KAAD,EAAW;AACTR,kBAAI,CAAChB,OAAL,CAAaO,OAAb;AACD,aARH;AAUD;;;;;;;yBApEUX,mB,EAAmB,+H,EAAA,qI,EAAA,qI,EAAA,iJ,EAAA,yH,EAAA,kJ;AAAA,O;;;cAAnBA,mB;AAAmB,8C;AAAA,iB;AAAA,gB;AAAA,0uC;AAAA;AAAA;ACZhC;;AACE;;AACE;;AACE;;AAA+B;;;;AAAqC;;AACpE;;AAAwB;AAAA,qBAAS,IAAA6B,UAAA,EAAT;AAAqB,aAArB;;AACtB;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACE;;AACA;;AACF;;AACA;;AACE;;AACA;;AACF;;AACA;;AACE;;AACA;;AACF;;AACA;;AACE;;AACA;;AACF;;AACA;;AACE;;AACA;;AACF;;AACF;;AACA;;AACE;;AAAqC;AAAA;AAAA;;AAAiC;;AACxE;;AACF;;AACF;;AACJ;;AACE;;AACE;;AACiE;AAAA;AAAA;;;;AAAsB;;AACzF;;AACA;;AACE;;AAIA;;AAIF;;AACF;;AACF;;;;AAnDqC;;AAAA;;AAWd;;AAAA;;AAIA;;AAAA;;AAIA;;AAAA;;AAIA;;AAAA;;AAIA;;AAAA;;AAI0B;;AAAA;;AAOzC;;AAAA;;AAA+D;;AAG9B;;AAAA;;AAID;;AAAA;;;;;;;;;;wEDpC3B7B,mB,EAAmB;gBAL/B,uDAK+B;iBALrB;AACT8B,oBAAQ,EAAE,uBADD;AAETC,uBAAW,EAAE,+BAFJ;AAGTC,qBAAS,EAAE,CAAC,+BAAD;AAHF,W;AAKqB,U","file":"default~pages-history-history-module~pages-popup-rating-shop-popup-rating-shop-module-es5.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ModalController, NavParams } from '@ionic/angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { AlertService } from 'src/app/services/alert/alert.service';\r\nimport { ApiService } from '../../services/api/api.service';\r\nimport { LoadingService } from '../../services/loading/loading.service';\r\n\r\n@Component({\r\n  selector: 'app-popup-rating-shop',\r\n  templateUrl: './popup-rating-shop.page.html',\r\n  styleUrls: ['./popup-rating-shop.page.scss'],\r\n})\r\nexport class PopupRatingShopPage implements OnInit {\r\n  message: string = '';\r\n  orderHistoryId = '';\r\n  rating_value_popup = 50;\r\n\r\n  constructor(\r\n    private modalController: ModalController,\r\n    private translate: TranslateService,\r\n    private apiService: ApiService,\r\n    private loading: LoadingService,\r\n    private navParams: NavParams,\r\n    private alertService: AlertService,\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.orderHistoryId = this.navParams.data.orderHistoryId;\r\n  }\r\n\r\n  closeModal() {\r\n    this.modalController.dismiss();\r\n  }\r\n\r\n  convertFormatMoney(value) {\r\n    value = value.toString();\r\n    let convert1 = '';\r\n    let convert2 = '';\r\n    let count1 = value.length;\r\n    for (let i = 1; i <= count1; i++) {\r\n      if (i % 3 == 0 && i != count1) {\r\n        convert1 = convert1 + value[count1 - i] + '.';\r\n      } else {\r\n        convert1 = convert1 + value[count1 - i];\r\n      }\r\n    }\r\n    let count2 = convert1.length;\r\n    for (let i = 1; i <= count2; i++) {\r\n      convert2 = convert2 + convert1[count2 - i];\r\n    }\r\n    return convert2;\r\n  }\r\n\r\n  eventSendRating() {\r\n    var self = this;\r\n    this.loading.present();\r\n    var data_rate = 0;\r\n    if (self.rating_value_popup > 87) {\r\n      data_rate = 5;\r\n    } else if (self.rating_value_popup > 67) {\r\n      data_rate = 4;\r\n    } else if (self.rating_value_popup > 47) {\r\n      data_rate = 3;\r\n    } else if (self.rating_value_popup > 27) {\r\n      data_rate = 2;\r\n    } else if (self.rating_value_popup > 7) {\r\n      data_rate = 1;\r\n    } else {\r\n      data_rate = 0;\r\n    }\r\n    this.apiService.putOrderProductRateStarShop(self.orderHistoryId, data_rate, self.message).subscribe(\r\n      (result) => {\r\n        self.alertService.presentToast(this.translate.instant('COMMON.message_rate_user_success'));\r\n        self.loading.dismiss();\r\n        this.modalController.dismiss();\r\n      },\r\n      (error) => {\r\n        self.loading.dismiss();\r\n      }\r\n    );\r\n  }\r\n}\r\n","<ion-content class=\"content-wrap\">\r\n  <div class=\"content-container\">\r\n    <ion-item lines=\"none\" class=\"header-item ion-no-padding\">\r\n      <ion-title class=\"popup-title\">{{ 'RATING_SHOP.title' | translate }}</ion-title>\r\n      <ion-buttons slot=\"end\" (click)=\"closeModal()\" class=\"btn-close-popup\">\r\n        <ion-icon name=\"close\"></ion-icon>\r\n      </ion-buttons>\r\n    </ion-item>\r\n    <ion-list lines=\"full\" class=\"ion-no-margin ion-no-padding margin-top-10\">\r\n      <ion-grid class=\"ion-no-padding\">\r\n        <ion-row class=\"ion-no-padding padding-0 margin-top-10\">\r\n          <ion-item lines=\"none\" class=\"width-100 group_stars_rate\">\r\n            <ion-item lines=\"none\" class=\"width-20\">\r\n              <ion-img src=\"../assets/icon/svg/stars_rating.svg\" class=\"img-responsive\" alt=\"\"></ion-img>\r\n              <ion-img *ngIf=\"rating_value_popup > 7\" src=\"../assets/icon/svg/stars_rating_fullsize.svg\" class=\"img-responsive position-image-rate\" alt=\"\"></ion-img>\r\n            </ion-item>\r\n            <ion-item lines=\"none\" class=\"width-20\">\r\n              <ion-img src=\"../assets/icon/svg/stars_rating.svg\" class=\"img-responsive\" alt=\"\"></ion-img>\r\n              <ion-img *ngIf=\"rating_value_popup > 27\" src=\"../assets/icon/svg/stars_rating_fullsize.svg\" class=\"img-responsive position-image-rate\" alt=\"\"></ion-img>\r\n            </ion-item>\r\n            <ion-item lines=\"none\" class=\"width-20\">\r\n              <ion-img src=\"../assets/icon/svg/stars_rating.svg\" class=\"img-responsive\" alt=\"\"></ion-img>\r\n              <ion-img *ngIf=\"rating_value_popup > 47\" src=\"../assets/icon/svg/stars_rating_fullsize.svg\" class=\"img-responsive position-image-rate\" alt=\"\"></ion-img>\r\n            </ion-item>\r\n            <ion-item lines=\"none\" class=\"width-20\">\r\n              <ion-img src=\"../assets/icon/svg/stars_rating.svg\" class=\"img-responsive\" alt=\"\"></ion-img>\r\n              <ion-img *ngIf=\"rating_value_popup > 67\" src=\"../assets/icon/svg/stars_rating_fullsize.svg\" class=\"img-responsive position-image-rate\" alt=\"\"></ion-img>\r\n            </ion-item>\r\n            <ion-item lines=\"none\" class=\"width-20\">\r\n              <ion-img src=\"../assets/icon/svg/stars_rating.svg\" class=\"img-responsive\" alt=\"\"></ion-img>\r\n              <ion-img *ngIf=\"rating_value_popup > 87\" src=\"../assets/icon/svg/stars_rating_fullsize.svg\" class=\"img-responsive position-image-rate\" alt=\"\"></ion-img>\r\n            </ion-item>\r\n          </ion-item>\r\n          <ion-item lines=\"none\" class=\"ion-item-range\">\r\n            <ion-range color=\"danger\" pin=\"true\" [(ngModel)]=\"rating_value_popup\"></ion-range>\r\n          </ion-item>\r\n        </ion-row>\r\n      </ion-grid>\r\n  </ion-list>\r\n    <ion-item class=\"modal-item feedback-textarea\" lines=\"none\">\r\n      <ion-textarea class=\"feedback-textarea-placeholder\" rows=\"4\"\r\n        placeholder=\"{{ 'RATING_SHOP.note_placeHolder' | translate }}\" [(ngModel)]=\"message\"></ion-textarea>\r\n    </ion-item>\r\n    <ion-toolbar lines=\"none\" class=\"ion-text-center modal-toolbar\">\r\n      <ion-button class=\"delete-button\"  *ngIf=\"rating_value_popup < 8 \r\n      || (rating_value_popup >= 8 && rating_value_popup < 68 && message == '')\">\r\n        <ion-label class=\"delete-button-label\">{{ 'RATING_SHOP.btn_send' | translate }}</ion-label>\r\n      </ion-button>\r\n      <ion-button class=\"delete-button\" *ngIf=\"rating_value_popup >= 68 \r\n        || (rating_value_popup >= 8 && rating_value_popup < 68 && message != '')\"  (click)=\"eventSendRating()\">\r\n        <ion-label class=\"delete-button-label\">{{ 'RATING_SHOP.btn_send' | translate }}</ion-label>\r\n      </ion-button>\r\n    </ion-toolbar>\r\n  </div>\r\n</ion-content>"]}