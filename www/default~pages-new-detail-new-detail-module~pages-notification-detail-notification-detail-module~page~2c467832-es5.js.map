{"version":3,"sources":["webpack:///src/app/pages/popup-share-info/popup-share-info.page.ts","webpack:///src/app/pages/popup-share-info/popup-share-info.page.html"],"names":["PopupShareInfoPage","translateConfigService","modalController","navParams","clipboard","translate","alertService","apiService","loading","route","currentPage","listArticlesComment","commentsCount","isLiked","isPostType","replyId","replyName","profileUser","selectedLanguage","getDefaultLanguage","numberRecordOnPage","NUMBER_RECORD_ON_PAGE","localStorage","getItem","JSON","parse","dataTransfer","data","transfer","apartment","articleID","articleId","isPost","getArticleComment","page","limit","search","event","present","self","getListArticleComment","subscribe","result","comments","length","concat","target","complete","dismiss","error","presentToast","instant","params","content","editorMsg","sendPostReply","res","err","sendPostComment","sendArticleReply","commentReply","createdBy","comment","find","item","_id","replies","unshift","sendArticleComment","setTimeout","ionContent","scrollToTop","id","name","document","getElementById","focus","time","Date","constructor","getTime","time_formats","seconds","token","list_choice","Math","abs","i","format","floor","likeStatus","postPostLike","response","postLike","statusLike","postArticleLike","articleLike","closeModal","loadData","sendMsg","selector","templateUrl","styleUrls"],"mappings":"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","file":"default~pages-new-detail-new-detail-module~pages-notification-detail-notification-detail-module~page~2c467832-es5.js","sourcesContent":["import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { ModalController, NavParams } from '@ionic/angular';\r\nimport { TranslateConfigService } from '../../translate-config.service';\r\nimport { Clipboard } from '@ionic-native/clipboard/ngx';\r\nimport { AlertService } from '../../services/alert/alert.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { ApiService } from 'src/app/services/api/api.service';\r\nimport { LoadingService } from 'src/app/services/loading/loading.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { ConstService } from 'src/app/utils/const.service';\r\n@Component({\r\n  selector: 'app-popup-share-info',\r\n  templateUrl: './popup-share-info.page.html',\r\n  styleUrls: ['./popup-share-info.page.scss'],\r\n})\r\nexport class PopupShareInfoPage implements OnInit {\r\n  @ViewChild('chat_input') inputField: ElementRef;\r\n  @ViewChild('ionContent') ionContent: any;\r\n\r\n  selectedLanguage: string;\r\n  dataTransfer: any;\r\n  editorMsg: any;\r\n  articleID: string;\r\n  currentPage: number = 1;\r\n  listArticlesComment: any = [];\r\n  numberRecordOnPage: number;\r\n  apartment: string;\r\n  commentsCount = 0;\r\n  isLiked = false;\r\n  isPostType = false;\r\n\r\n  replyId: string = null;\r\n  replyName: string = null;\r\n  profileUser = null;\r\n\r\n  constructor(\r\n    private translateConfigService: TranslateConfigService,\r\n    private modalController: ModalController,\r\n    private navParams: NavParams,\r\n    private clipboard: Clipboard,\r\n    private translate: TranslateService,\r\n    private alertService: AlertService,\r\n    private apiService: ApiService,\r\n    private loading: LoadingService,\r\n    private route: ActivatedRoute\r\n  ) {\r\n    this.selectedLanguage = this.translateConfigService.getDefaultLanguage();\r\n    this.numberRecordOnPage = ConstService.NUMBER_RECORD_ON_PAGE;\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (localStorage.getItem('profile')) {\r\n      this.profileUser = JSON.parse(localStorage.getItem('profile'));\r\n    }\r\n    this.dataTransfer = this.navParams.data.transfer;\r\n    this.isLiked = this.dataTransfer.isLiked;\r\n    this.apartment = this.dataTransfer.apartment;\r\n    this.articleID = this.dataTransfer.articleId;\r\n    this.isPostType = this.dataTransfer.isPost ? this.dataTransfer.isPost : false;\r\n    this.commentsCount = this.dataTransfer.commentsCount;\r\n    this.getArticleComment(this.currentPage, this.numberRecordOnPage, this.articleID, '', null);\r\n  }\r\n\r\n  getArticleComment(page: number, limit: number, articleID: string, search: string, event: any) {\r\n    this.loading.present();\r\n    const self = this;\r\n    this.apiService.getListArticleComment(page, limit, articleID, search).subscribe(\r\n      (result) => {\r\n        if (result.comments.length > 0) {\r\n          if (self.currentPage <= 1) {\r\n            self.listArticlesComment = result.comments;\r\n          } else {\r\n            self.listArticlesComment = self.listArticlesComment.concat(result.comments);\r\n          }\r\n        }\r\n        if (event) {\r\n          event.target.complete();\r\n        }\r\n        self.loading.dismiss();\r\n      },\r\n      (error) => {\r\n        self.loading.dismiss();\r\n      }\r\n    );\r\n  }\r\n\r\n  closeModal() {\r\n    this.modalController.dismiss({ isLiked: this.isLiked, commentsCount: this.commentsCount });\r\n  }\r\n\r\n  doRefresh(event) {\r\n    this.currentPage = 1;\r\n    this.numberRecordOnPage = ConstService.NUMBER_RECORD_ON_PAGE;\r\n    this.getArticleComment(this.currentPage, this.numberRecordOnPage, this.articleID, '', event);\r\n  }\r\n\r\n  sendMsg() {\r\n    if (!this.apartment || this.apartment == '') {\r\n      this.alertService.presentToast(this.translate.instant('NOTIFICATION_COMMENT.msg_apartment_not_correct'));\r\n    }\r\n    this.loading.present();\r\n    const self = this;\r\n    const params = {\r\n      content: this.editorMsg,\r\n      apartment: this.apartment,\r\n    };\r\n\r\n    if (this.isPostType) {\r\n      if (this.replyId !== null) {\r\n        // send reply comment\r\n        this.apiService.sendPostReply(params, this.replyId).subscribe(\r\n          (res) => {\r\n            self.loading.dismiss();\r\n            self.editorMsg = '';\r\n            // self.doRefresh(null);\r\n          },\r\n          (err) => {\r\n            self.editorMsg = '';\r\n            self.loading.dismiss();\r\n          }\r\n        );\r\n      } else {\r\n        this.apiService.sendPostComment(params, this.articleID).subscribe(\r\n          (result) => {\r\n            self.loading.dismiss();\r\n            self.editorMsg = '';\r\n            // self.doRefresh(null);\r\n          },\r\n          (error) => {\r\n            self.editorMsg = '';\r\n            self.loading.dismiss();\r\n          }\r\n        );\r\n      }\r\n    } else {\r\n      if (this.replyId !== null) {\r\n        // send reply comment\r\n        this.apiService.sendArticleReply(params, this.replyId).subscribe(\r\n          (res) => {\r\n            const commentReply = res.commentReply;\r\n            commentReply.createdBy = self.profileUser;\r\n            const comment = self.listArticlesComment.find((item) => item._id == commentReply.comment);\r\n            if (comment) {\r\n              comment.replies.unshift(commentReply);\r\n              self.listArticlesComment = [...self.listArticlesComment];\r\n            }\r\n            self.loading.dismiss();\r\n            self.editorMsg = '';\r\n          },\r\n          (err) => {\r\n            self.editorMsg = '';\r\n            self.loading.dismiss();\r\n          }\r\n        );\r\n      } else {\r\n        // send comment\r\n        this.apiService.sendArticleComment(params, this.articleID).subscribe(\r\n          (result) => {\r\n            const comment = result.comment;\r\n            comment.createdBy = self.profileUser;\r\n            self.listArticlesComment = [comment, ...this.listArticlesComment];\r\n            self.commentsCount++;\r\n            self.loading.dismiss();\r\n            self.editorMsg = '';\r\n            setTimeout(() => {\r\n              self.ionContent.scrollToTop();\r\n            });\r\n          },\r\n          (error) => {\r\n            self.editorMsg = '';\r\n            self.loading.dismiss();\r\n          }\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  replyComment(id: string, name: string) {\r\n    this.replyId = id;\r\n    this.replyName = name;\r\n    document.getElementById('reply-item').focus();\r\n  }\r\n\r\n  cancelReplyComment() {\r\n    this.replyId = null;\r\n    this.replyName = null;\r\n  }\r\n\r\n  loadData(event) {\r\n    this.currentPage++;\r\n    this.getArticleComment(this.currentPage, this.numberRecordOnPage, this.articleID, '', event);\r\n  }\r\n\r\n  // public getTimeDiff(mesDate: string) {\r\n  //   const curDate = new Date(mesDate) ;\r\n\r\n  //   console.warn(Math.ceil((new Date() - curDate) / (1000 * 60 * 60)));\r\n  //   return Math.ceil((new Date() - curDate) / (1000 * 60 * 60))\r\n  // };\r\n\r\n  time_ago(time) {\r\n    switch (typeof time) {\r\n      case 'number':\r\n        break;\r\n      case 'string':\r\n        time = +new Date(time);\r\n        break;\r\n      case 'object':\r\n        if (time.constructor === Date) time = time.getTime();\r\n        break;\r\n      default:\r\n        time = +new Date();\r\n    }\r\n    let time_formats = [\r\n      [60, this.translate.instant('TIME_AGO.seconds'), 1], // 60\r\n      [120, this.translate.instant('TIME_AGO.a_minute'), this.translate.instant('TIME_AGO.a_minute_from')], // 60*2\r\n      [3600, this.translate.instant('TIME_AGO.minutes'), 60], // 60*60, 60\r\n      [7200, this.translate.instant('TIME_AGO.a_hour_ago'), this.translate.instant('TIME_AGO.a_hour_from')], // 60*60*2\r\n      [86400, this.translate.instant('TIME_AGO.hours'), 3600], // 60*60*24, 60*60\r\n      [172800, this.translate.instant('TIME_AGO.yesterday'), this.translate.instant('TIME_AGO.tomorrow')], // 60*60*24*2\r\n      [604800, this.translate.instant('TIME_AGO.days'), 86400], // 60*60*24*7, 60*60*24\r\n      [1209600, this.translate.instant('TIME_AGO.last_week'), this.translate.instant('TIME_AGO.next_week')], // 60*60*24*7*4*2\r\n      [2419200, this.translate.instant('TIME_AGO.weeks'), 604800], // 60*60*24*7*4, 60*60*24*7\r\n      [4838400, this.translate.instant('TIME_AGO.last_month'), this.translate.instant('TIME_AGO.next_month')], // 60*60*24*7*4*2\r\n      [29030400, this.translate.instant('TIME_AGO.months'), 2419200], // 60*60*24*7*4*12, 60*60*24*7*4\r\n      [58060800, this.translate.instant('TIME_AGO.last_year'), this.translate.instant('TIME_AGO.next_year')], // 60*60*24*7*4*12*2\r\n      [2903040000, this.translate.instant('TIME_AGO.years'), 29030400], // 60*60*24*7*4*12*100, 60*60*24*7*4*12\r\n      [5806080000, this.translate.instant('TIME_AGO.last_century'), this.translate.instant('TIME_AGO.next_century')], // 60*60*24*7*4*12*100*2\r\n      [58060800000, this.translate.instant('TIME_AGO.centuries'), 2903040000], // 60*60*24*7*4*12*100*20, 60*60*24*7*4*12*100\r\n    ];\r\n    let seconds = (+new Date() - time) / 1000;\r\n    let token = this.translate.instant('TIME_AGO.ago');\r\n    let list_choice = 1;\r\n    \r\n    if (seconds == 0) {\r\n      return this.translate.instant('TIME_AGO.just_now');\r\n    }\r\n    if (seconds < 0) {\r\n      seconds = Math.abs(seconds);\r\n      token = this.translate.instant('TIME_AGO.from_now');\r\n      list_choice = 2;\r\n    }\r\n    let i = 0,\r\n      format;\r\n    while ((format = time_formats[i++])) {\r\n      if (seconds < format[0]) {\r\n        if (typeof format[2] == 'string') return format[list_choice];\r\n        else return Math.floor(seconds / format[2]) + ' ' + format[1] + ' ' + token;\r\n      }\r\n    }\r\n\r\n    return time;\r\n  }\r\n\r\n  postLike() {\r\n    let likeStatus = 'none';\r\n    if (!this.isLiked) {\r\n      likeStatus = 'like';\r\n    }\r\n\r\n    if (this.isPostType) {\r\n      this.apiService.postPostLike(this.articleID, likeStatus).subscribe((response) => {\r\n        if (response.postLike.statusLike === 'like') {\r\n          this.isLiked = true;\r\n        } else {\r\n          this.isLiked = false;\r\n        }\r\n      });\r\n    } else {\r\n      this.apiService.postArticleLike(this.articleID, likeStatus).subscribe((response) => {\r\n        if (response?.articleLike?.statusLike === 'like') {\r\n          this.isLiked = true;\r\n        } else {\r\n          this.isLiked = false;\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n","<!-- <ion-backdrop></ion-backdrop> -->\r\n<ion-content class=\"content-wrap\">\r\n  <div class=\"content-container\" no-bounce>\r\n    <ion-item lines=\"none\" class=\"header-item\">\r\n      <ion-buttons slot=\"start\" class=\"\" (click)=\"closeModal()\" class=\"btn-close-popup\">\r\n        <ion-icon name=\"chevron-back\" color=\"#666666\"></ion-icon>\r\n      </ion-buttons>\r\n      <ion-label class=\"header-comments-count\">{{commentsCount}} {{ 'NOTIFICATION.commented' | translate }}</ion-label>\r\n      <ion-buttons slot=\"end\" class=\"share-info-title\" [ngClass]=\"{'liked': isLiked}\" (click)=\"postLike()\">\r\n        <ion-icon name=\"heart\" class=\"header-heart\"></ion-icon>\r\n        <ion-label class=\"header-like\">{{ 'NOTIFICATION.like_text' | translate }}\r\n        </ion-label>\r\n      </ion-buttons>\r\n    </ion-item>\r\n\r\n    <!-- CONVERSATION -->\r\n    <ion-content #ionContent>\r\n      <div class=\"conversation-wrapper\" *ngFor=\"let item of listArticlesComment\">\r\n        <div class=\"conversation-item\">\r\n          <ion-avatar class=\"user-avatar-wrapper\">\r\n            <ion-img class=\"user-avatar\" *ngIf=\"item.createdBy\" src=\"{{item.createdBy.avatar}}\"></ion-img>\r\n            <ion-img class=\"user-avatar\" *ngIf=\"!item.createdBy\" src=\"../assets/icon/avatar-default.png\"></ion-img>\r\n          </ion-avatar>\r\n\r\n          <div class=\"user-text-wrapper\">\r\n            <ion-label class=\"user-name\">{{ item?.createdBy?.displayName || '' }}</ion-label>\r\n            <ion-label class=\"conversation-text\">{{ item.content }}</ion-label>\r\n          </div>\r\n        </div>\r\n        <div class=\"conversation-actions\">\r\n          <ion-label class=\"action-time\">{{ time_ago(item.createdAt) }}</ion-label>\r\n          <ion-label class=\"action-seperator\">|</ion-label>\r\n          <ion-label class=\"action-reply\" (click)=\"replyComment(item._id, item?.createdBy?.displayName)\">{{ 'NOTIFICATION_COMMENT.reply' | translate }}</ion-label>\r\n        </div>\r\n\r\n        <!-- CONVERSETION REPLY -->\r\n        <div class=\"conversation-reply\" *ngFor=\"let reply of item.replies.reverse()\">\r\n          <div class=\"conversation-item\">\r\n            <ion-avatar class=\"user-avatar-wrapper\">\r\n              <ion-img class=\"user-avatar\" *ngIf=\"reply.createdBy\" src=\"{{reply.createdBy.avatar}}\"></ion-img>\r\n              <ion-img class=\"user-avatar\" *ngIf=\"!reply.createdBy\" src=\"../assets/icon/avatar-default.png\"></ion-img>\r\n            </ion-avatar>\r\n            <div class=\"user-text-reply\">\r\n              <ion-label class=\"user-name\">{{reply.createdBy ? reply.createdBy.displayName : ''}}</ion-label>\r\n              <ion-label class=\"conversation-text\">{{reply.content}}</ion-label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <!-- END CONVERSETION REPLY -->\r\n      </div>\r\n      <ion-infinite-scroll class=\"infinite-scroll\" threshold=\"50px\" (ionInfinite)=\"loadData($event)\">\r\n        <ion-infinite-scroll-content loadingSpinner=\"\" loadingText=\"\"></ion-infinite-scroll-content>\r\n      </ion-infinite-scroll>\r\n    </ion-content>\r\n    <!-- END CONVERSATION -->\r\n  </div>\r\n \r\n</ion-content>\r\n<ion-footer class=\"ion-no-border footer-content share-info\">\r\n  <ion-item id=\"reply-item\" lines=\"none\" class=\"reply-item\" *ngIf=\"replyId !== null\">\r\n    <ion-label class=\"reply-label\">{{ 'NOTIFICATION_COMMENT.reply_label' | translate }} <span\r\n        class=\"reply-name\">{{ replyName }}</span></ion-label>\r\n    <ion-label class=\"cancel-label\" (click)=\"cancelReplyComment()\">{{ 'NOTIFICATION_COMMENT.cancel_label' | translate }}\r\n    </ion-label>\r\n  </ion-item>\r\n  <ion-item lines=\"none\" class=\"add-comment-item\">\r\n    <ion-item class=\"comment-textarea\">\r\n      <ion-textarea #chat_input class=\"input-area\" rows=\"1\" wrap=\"soft\" maxlength=\"500\" auto-grow id=\"reply-item\"\r\n        [(ngModel)]=\"editorMsg\" placeholder=\"{{ 'REQUEST_DETAIL.place_holder_input' | translate }}\">\r\n      </ion-textarea>\r\n    </ion-item>\r\n    <ion-item lines=\"none\" class=\"ion-item-send-image\">\r\n      <img src=\"../assets/common/send.svg\" class=\"icon-send icon-send-default\" (click)=\"sendMsg()\" />\r\n    </ion-item>\r\n  </ion-item>\r\n</ion-footer>"]}