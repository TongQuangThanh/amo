{"version":3,"sources":["./src/app/pages/survey/survey.page.ts","./src/app/pages/survey/survey.page.html","./src/app/pages/survey/survey.module.ts"],"names":[],"mappings":"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","file":"pages-survey-survey-module-es2015.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { AlertController, ModalController } from '@ionic/angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { ApiService } from 'src/app/services/api/api.service';\r\nimport { LoadingService } from 'src/app/services/loading/loading.service';\r\nimport { PopupSurveyDetailPage } from '../popup-survey-detail/popup-survey-detail.page';\r\n\r\ninterface Question {\r\n  question: string;\r\n  question_type: any;\r\n  answer_option?: any;\r\n  answer?: any;\r\n}\r\ntype NavigateAction = 'next' | 'prev';\r\n\r\n@Component({\r\n  selector: 'app-survey',\r\n  templateUrl: './survey.page.html',\r\n  styleUrls: ['./survey.page.scss'],\r\n})\r\nexport class SurveyPage implements OnInit {\r\n  surveyId: any;\r\n  surveyData: any;\r\n  survey: Array<Question> = [];\r\n  surveyResult = {};\r\n\r\n  currentStep = 0;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private translate: TranslateService,\r\n    private alertController: AlertController,\r\n    private apiService: ApiService,\r\n    private modalController: ModalController,\r\n    private loading: LoadingService,\r\n    private route: ActivatedRoute,\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.surveyId = this.route.snapshot.paramMap.get('id');\r\n    this.getSurveyDetail();\r\n  }\r\n  ionViewWillEnter() {}\r\n\r\n  getSurveyDetail() {\r\n    this.loading.present();\r\n    this.apiService.getArticleDetail(this.surveyId).subscribe(\r\n      (result) => {\r\n        this.surveyData = result.article;\r\n        this.survey = JSON.parse(this.surveyData.survey);\r\n        this.mappingSurveyData();\r\n        this.loading.dismiss();\r\n      },\r\n      (error) => {\r\n        this.loading.dismiss();\r\n      }\r\n    );\r\n  }\r\n\r\n  changeStep(action: NavigateAction) {\r\n    if (action === 'next') {\r\n      if (this.currentStep < this.survey.length - 1) {\r\n        const surveyStep = this.survey[this.currentStep];\r\n        if (surveyStep && surveyStep.question_type == '1' && !surveyStep.answer_option.find((opt) => opt.isChecked)) {\r\n          this.presentAlert(this.translate.instant('SURVEY.error_chexbox'));\r\n          return;\r\n        }\r\n        this.currentStep++;\r\n      } else {\r\n        this.createSurveyResult();\r\n        this.apiService.postSurvey(this.surveyData._id, this.surveyResult).subscribe(\r\n          (res) => {\r\n            this.router.navigate(['/survey-post-complete']);\r\n          },\r\n          (error) => {}\r\n        );\r\n      }\r\n    } else {\r\n      this.currentStep--;\r\n    }\r\n  }\r\n\r\n  mappingSurveyData() {\r\n    this.survey = this.survey.map((item) => {\r\n      if (item.question_type == '0') {\r\n        item.answer = item.answer_option[0];\r\n        return item;\r\n      }\r\n      if (item.question_type == '1') {\r\n        item.answer_option = item.answer_option.map((option) => ({ value: option, isChecked: false }));\r\n        return item;\r\n      }\r\n      item.answer = '';\r\n      return item;\r\n    });\r\n  }\r\n\r\n  createSurveyResult() {\r\n    this.survey.forEach((item, index) => {\r\n      if (item.question_type == '0') {\r\n        this.surveyResult[`${index}`] = { content: item.question, answer: item.answer };\r\n      } else if (item.question_type == '1') {\r\n        const answerResult = item.answer_option.filter((option) => option.isChecked).map((op) => op.value);\r\n        this.surveyResult[`${index}`] = { content: item.question, answer: answerResult };\r\n      } else {\r\n        this.surveyResult[`${index}`] = { content: item.question, answer: item.answer };\r\n      }\r\n    });\r\n  }\r\n\r\n  async surveyDetailClick() {\r\n    const modal = await this.modalController.create({\r\n      component: PopupSurveyDetailPage,\r\n      componentProps: {\r\n        surveyData: this.surveyData\r\n      },\r\n      cssClass: 'survey-dtail-custom',\r\n    });\r\n    return await modal.present();\r\n  }\r\n\r\n  async presentAlert(message) {\r\n    var self = this;\r\n    const alert = await this.alertController.create({\r\n      header: self.translate.instant('COMMON.information'),\r\n      message: message,\r\n      buttons: ['OK'],\r\n    });\r\n    await alert.present();\r\n  }\r\n}\r\n","<ion-content class=\"no-scroll survey-wrapper\" slot=\"fixed\">\r\n    <ion-header class=\"survey-header\">\r\n        <ion-buttons class=\"back-button\">\r\n            <ion-back-button color=\"light\" text=\"\" icon=\"chevron-back\" class=\"ion-back-button\"></ion-back-button>\r\n        </ion-buttons>\r\n        <ion-label class=\"header-title\"></ion-label>\r\n        <ion-label></ion-label>\r\n    </ion-header>\r\n\r\n    <div class=\"survey-title-wrapper\">\r\n        <ion-label class=\"survey-title\">{{surveyData?.title}}</ion-label>\r\n        <ion-label class=\"survey-sub-title\">{{surveyData?.excerpt}}</ion-label>\r\n        <ion-label class=\"survey-detail-link\" (click)=\"surveyDetailClick()\">{{'SURVEY.detail_lable' | translate}}</ion-label>\r\n    </div>\r\n\r\n    <div class=\"survey-content\">\r\n        <div class=\"question-wrapper {{currentStep != i ? 'survey-padding-bottom' : ''}}\" *ngFor=\"let question of survey; let i = index\">\r\n            <div class=\"question-order\" *ngIf=\"currentStep < i || currentStep === i\">{{ i+1 }}</div>\r\n            <div class=\"question-order\" *ngIf=\"currentStep > i\">\r\n                <ion-icon name=\"checkmark\"></ion-icon>\r\n            </div>\r\n            <div class=\"question\">\r\n                <!-- question -->\r\n                <ion-label class=\"question-title\">{{ question.question }}</ion-label>\r\n                <div class=\"answer-block\" *ngIf=\"currentStep == i\">\r\n                    <!-- single type -->\r\n                    <ion-list class=\"list-anwers\" *ngIf=\"question.question_type == '0'\">\r\n                        <ion-radio-group value=\"biff\" [value]=\"question.answer\" (ionChange) = \"question.answer = $event.detail.value\">\r\n                            <ion-item class=\"answer-item\" lines=\"none\" *ngFor=\"let answer of question.answer_option\">\r\n                                <ion-label class=\"answer-label\">{{ answer }}</ion-label>\r\n                                <ion-radio mode='md' slot=\"start\" color=\"light\" [value]=\"answer\"></ion-radio>\r\n                            </ion-item>\r\n                        </ion-radio-group>\r\n                    </ion-list>\r\n                    <!-- multiple type -->\r\n                    <ion-list class=\"list-anwers\" *ngIf=\"question.question_type == '1'\">\r\n                        <ion-item class=\"answer-item\" lines=\"none\" *ngFor=\"let answer of question.answer_option\">\r\n                            <ion-label class=\"answer-label\">{{answer.value}}</ion-label>\r\n                            <ion-checkbox mode=\"md\" slot=\"start\" color=\"light\" class=\"survey-checkbox\" [(ngModel)]=\"answer.isChecked\">\r\n                            </ion-checkbox>\r\n                        </ion-item>\r\n                    </ion-list>\r\n                    <!-- text type -->\r\n                    <ion-textarea class=\"answer-textarea\" placeholder=\"Viết ý kiến\" autoGrow=\"true\" *ngIf=\"question.question_type == '2'\"\r\n                        [(ngModel)]=\"question.answer\">\r\n                    </ion-textarea>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"navigation-block\" [ngClass]=\"{'single-button': currentStep == 0}\">\r\n        <ion-button color=\"light\" shape=\"round\" (click)=\"changeStep('prev')\" class=\"navigation-btn\" *ngIf=\"currentStep > 0\">\r\n            <ion-icon name=\"arrow-back-outline\"></ion-icon>\r\n        </ion-button>\r\n        <ion-button color=\"light\" shape=\"round\" (click)=\"changeStep('next')\" class=\"navigation-btn\">\r\n            <ion-icon name=\"arrow-forward-outline\"></ion-icon>\r\n        </ion-button>\r\n    </div>\r\n</ion-content>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { MatTabsModule } from '@angular/material/tabs';\r\nimport { SuperTabsModule } from '@ionic-super-tabs/angular';\r\nimport { SurveyPage } from './survey.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: SurveyPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    MatTabsModule,\r\n    SuperTabsModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [SurveyPage]\r\n})\r\nexport class SurveyPageModule {}\r\n\r\n"],"sourceRoot":"webpack:///"}