{"version":3,"sources":["./src/app/pages/popup-pincode-password/popup-pincode-password.page.ts","./src/app/pages/popup-pincode-password/popup-pincode-password.page.html"],"names":[],"mappings":"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","file":"default~pages-forgot-password-forgot-password-module~pages-popup-pincode-password-popup-pincode-pass~9921a548-es2015.js","sourcesContent":["import { Component, Input, Output, EventEmitter, SimpleChanges, OnInit } from '@angular/core';\r\nimport { Validators, FormGroup, FormArray, FormControl, FormBuilder } from '@angular/forms';\r\nimport { LoadingService } from '../../services/loading/loading.service';\r\nimport { ApiService } from '../../services/api/api.service';\r\nimport { ModalController, NavParams } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-popup-pincode-password',\r\n  templateUrl: './popup-pincode-password.page.html',\r\n  styleUrls: ['./popup-pincode-password.page.scss'],\r\n})\r\nexport class PopupPincodePasswordPage implements OnInit {\r\n\r\n  pinCodeArray: any[];\r\n  pinCodeFormGroup: FormGroup;\r\n  phoneNumber: string;\r\n  color: string=\"gray\";\r\n  isHidden: boolean = false;\r\n  codeSize: number = 4;\r\n  isChecking:boolean= false;\r\n  isError:boolean=false;\r\n  isEnableResentCode: boolean;\r\n  timmer:any;\r\n  timmerCount: number;\r\n\r\n  constructor(\r\n    private apiService: ApiService,\r\n    private loading: LoadingService,\r\n    private modalController: ModalController,\r\n    private navParams: NavParams\r\n  ) {\r\n    this.initiateBuilder();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.phoneNumber = this.navParams.data.phoneNumber;\r\n    this.setupPreventResentCode();\r\n  }\r\n\r\n  setupPreventResentCode(){\r\n    this.isEnableResentCode = false;\r\n    var self = this;\r\n    this.timmerCount = 30;\r\n    this.timmer = setInterval(() => {\r\n      if(self.timmerCount > 1){\r\n        self.timmerCount -=1;\r\n      }else{\r\n        self.timmerCount = 0;\r\n        self.isEnableResentCode = true;\r\n      }\r\n    }, 1000);\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    let stylebody = document.body.style;\r\n    if (changes.color != undefined) {\r\n      stylebody.setProperty('--borderColor', changes.color.currentValue);\r\n    }\r\n    if (changes.isHidden != undefined) {\r\n      if (changes.isHidden.currentValue == false) {\r\n        stylebody.setProperty('--charShape', 'none');\r\n      } else {\r\n        stylebody.setProperty('--charShape', 'disc');\r\n      }\r\n    }\r\n\r\n    this.initiateBuilder();\r\n\r\n  }\r\n\r\n  initiateBuilder() {\r\n    this.pinCodeFormGroup = new FormGroup({});\r\n\r\n    for (let i = 0; i < this.codeSize; i++) {\r\n      let formController: FormControl = new FormControl({ value: '', disabled: true }, [Validators.required]);\r\n      this.pinCodeFormGroup.addControl('codeFiled' + i, formController);\r\n    }\r\n\r\n    let v_pinCodeArray: any[] = [];\r\n    Object.keys(this.pinCodeFormGroup.value).forEach(function (key) {\r\n      v_pinCodeArray.push(key);\r\n    });\r\n\r\n    this.pinCodeArray = v_pinCodeArray;\r\n    this.pinCodeFormGroup.get('codeFiled0').enable();\r\n  }\r\n  ngAfterViewInit() {\r\n    let input: HTMLElement = document.querySelectorAll('.pinCodeInput').item(0) as HTMLElement;\r\n    input.focus();\r\n  }\r\n\r\n\r\n  onKeyUp($event: any, item: any, index: any) {\r\n    let v_index;\r\n\r\n    let reg = new RegExp(\"[0-9]\");\r\n\r\n    if ($event.key == \"Backspace\") {\r\n      if (index == 0) {\r\n        v_index = 0;\r\n      } else {\r\n        v_index = index - 1;\r\n        this.pinCodeFormGroup.get('codeFiled' + index).disable();\r\n\r\n      }\r\n    } else {\r\n      if (reg.test($event.target.value)) {\r\n\r\n        if (index == this.codeSize - 1) {\r\n          v_index = this.codeSize - 1;\r\n        } else {\r\n          v_index = index + 1;\r\n          this.pinCodeFormGroup.get('codeFiled' + v_index).enable();\r\n\r\n        }\r\n      }\r\n    }\r\n\r\n    let input: HTMLElement = document.querySelectorAll('.pinCodeInput').item(v_index) as HTMLElement;\r\n    input.focus();\r\n\r\n\r\n    if (index == this.codeSize - 1 && $event.key != \"Backspace\") {\r\n      let pinCodeValue: string = '';\r\n      Object.keys(this.pinCodeFormGroup.value).forEach((key) => {\r\n        pinCodeValue += this.pinCodeFormGroup.value[key];\r\n      });\r\n\r\n      if (this.pinCodeFormGroup.valid) {\r\n        this.checkingPincode(pinCodeValue);\r\n      } else {\r\n      }\r\n    }\r\n  }\r\n\r\n  onKeyDown($event: any) {\r\n    if ($event.key != \"Backspace\") {\r\n\r\n      if ($event.target.value.length == 1) {\r\n        return false;\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  resentPinCode(){\r\n    if(!this.isEnableResentCode){\r\n      return;\r\n    }\r\n    this.apiService.forgotPassword(this.phoneNumber).subscribe(result => {\r\n    },\r\n    error => {\r\n    });\r\n    this.setupPreventResentCode();\r\n  }\r\n\r\n  checkingPincode(pinCodeValue:string){\r\n    const self = this;\r\n    this.isChecking = true;\r\n    this.loading.present();\r\n    this.apiService.verifyTokenCode(this.phoneNumber, pinCodeValue)\r\n      .subscribe(result => {\r\n        self.isError = false;\r\n        self.loading.dismiss();\r\n        self.finishPinCode(pinCodeValue);\r\n    },\r\n    error => {\r\n      this.isError = true;\r\n      this.isChecking = false;\r\n      self.loading.dismiss();\r\n    });\r\n  }\r\n\r\n  async finishPinCode(pinCodeValue:string){\r\n    const onClosedData = JSON.stringify({\r\n      result: \"0\",\r\n      message: \"success\",\r\n      token: pinCodeValue\r\n    });\r\n    await this.modalController.dismiss(onClosedData);\r\n  }\r\n\r\n  async closeModal() {\r\n    const onClosedData = JSON.stringify({\r\n      result: \"1\",\r\n      message: \"cancel\",\r\n      token:\"\"\r\n    });\r\n    await this.modalController.dismiss(onClosedData);\r\n  }\r\n}\r\n","<ion-content>\r\n  <div class=\"content-container\">\r\n    <ion-item lines=\"none\" class=\"header-item\">\r\n      <ion-buttons slot=\"end\" class=\"\" (click)=\"closeModal()\" class=\"btn-close-popup\">\r\n        <ion-icon name=\"close\"></ion-icon>\r\n      </ion-buttons>\r\n    </ion-item>\r\n    <ion-toolbar class=\"ion-text-center modal-item\">\r\n      \r\n      <ion-item lines=\"none\" class=\"note-style\">\r\n        <ion-label class=\"ion-text-wrap label-text\">{{ 'PINCODE_PASSWORD.pincode_note' | translate }}</ion-label>\r\n      </ion-item>\r\n      <ion-item lines=\"none\" class=\"padding-none margin-none\">\r\n        <ion-grid class=\"pinCodeGrid\">\r\n          <form [formGroup]='pinCodeFormGroup' class=\"form-class\">\r\n            <ion-row>\r\n              <ion-col *ngFor=\"let controlItem of this.pinCodeArray;let i = index;let last=last\">\r\n                <input \r\n                  ng-pattern=\"/^[0-9]*$/\"\r\n                  ng-maxlength=\"1\"\r\n                  maxlength=\"1\"\r\n                  class=\"pinCodeInput\"\r\n                  type=\"number\"\r\n                  formControlName=\"{{controlItem}}\"\r\n                  (keyup)=\"onKeyUp($event,controlItem, i)\"\r\n                  (keydown)=\"onKeyDown($event)\"/>\r\n              </ion-col>\r\n            </ion-row>\r\n          </form>\r\n        </ion-grid>\r\n      </ion-item>\r\n      <ion-label *ngIf=\"isError == true\" class=\"wrong-code\">{{ 'PINCODE_PASSWORD.wrong_code' | translate }}</ion-label>\r\n      <ion-item lines=\"none\" class=\"image-item\"> \r\n        <ion-spinner *ngIf=\"isChecking == true\" name=\"crescent\" class=\"image-icon-check\"></ion-spinner>\r\n      </ion-item>\r\n      <ion-item lines=\"none\" class=\"label-item ion-text-center\">\r\n        <ion-label class=\"timecounter-label\">{{ 'PINCODE_PASSWORD.timecounter' | translate }} <span *ngIf=\"isEnableResentCode == false\" class=\"timecounter\">{{ timmerCount }}</span><span>(s)</span></ion-label>\r\n        <!-- <ion-label *ngIf=\"isEnableResentCode == false\" class=\"timecounter\">{{ timmerCount }} <span>(s)</span></ion-label> -->\r\n      </ion-item>\r\n      <ion-toolbar class=\"label-item ion-text-center\">\r\n        <ion-button class=\"btn-resend\" (click)=\"resentPinCode()\" disabled=\"!isEnableResentCode\">\r\n          <ion-label class=\"btn-resend-label\">{{ 'PINCODE_PASSWORD.btn_resend_code' | translate }} </ion-label>\r\n        </ion-button>        \r\n      </ion-toolbar>\r\n      <!-- <ion-item *ngIf=\"isError == true\" lines=\"none\" class=\"ion-text-center\">\r\n        <ion-label slot=\"end\" class=\"wrong-code\">{{ 'PINCODE_PASSWORD.wrong_code' | translate }}</ion-label>\r\n      </ion-item> -->\r\n    </ion-toolbar>\r\n  </div>\r\n\r\n</ion-content>\r\n"],"sourceRoot":"webpack:///"}