{"version":3,"sources":["./src/app/pages/payment-confirm/payment-confirm.page.ts","./src/app/pages/payment-confirm/payment-confirm.page.html","./src/app/pages/payment-confirm/payment-confirm.module.ts"],"names":[],"mappings":"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","file":"pages-payment-confirm-payment-confirm-module-es2015.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ApiService } from '../../services/api/api.service';\r\nimport { AlertController, NavController } from '@ionic/angular';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { LoadingService } from '../../services/loading/loading.service';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { PopupPaymentFunctionPage } from '../popup-payment-function/popup-payment-function.page';\r\nimport { PopupPaymentSuccessPage } from '../popup-payment-success/popup-payment-success.page';\r\nimport { PopupIframePaymentPage } from '../popup-iframe-payment/popup-iframe-payment.page';\r\nimport { InAppBrowser } from '@ionic-native/in-app-browser/ngx';\r\n\r\n@Component({\r\n  selector: 'app-payment-confirm',\r\n  templateUrl: './payment-confirm.page.html',\r\n  styleUrls: ['./payment-confirm.page.scss'],\r\n})\r\nexport class PaymentConfirmPage implements OnInit {\r\n  paymentMethodList = [];\r\n  titlePage: string;\r\n  totalCash: number;\r\n  paidAmount: number;\r\n  listPaymentContent: any;\r\n  paymentStartAt: string;\r\n  paymentEndAt: string;\r\n  paymentID: string;\r\n  paymentStatus: any;\r\n  paymentType: any = \"payment_cash\";\r\n  paymentUpdateAt = '';\r\n  paymentCategory = null;\r\n  paymentSelected = null;\r\n  epayUserInfo = null;\r\n  promotionMoney = 0;\r\n  urlPayment: any;\r\n\r\n  constructor(\r\n    public modalController: ModalController,\r\n    private loading: LoadingService,\r\n    public apiService: ApiService,\r\n    private navCtrl: NavController,\r\n    private route: ActivatedRoute,\r\n    private translate: TranslateService,\r\n    private alertController: AlertController,\r\n    private iab: InAppBrowser\r\n  ) {}\r\n  ngOnInit() {\r\n    // this.epayUserInfo = this.apiService.getEpayUserStored();\r\n    this.paymentID = this.route.snapshot.paramMap.get('id');\r\n    this.listPaymentContent = [];\r\n    this.paymentType = 'payment_cash';\r\n    this.getPaymentDetail(this.paymentID);\r\n    // this.dumyPaymentMethod();\r\n  }\r\n\r\n  getPaymentDetail(paymentID: string) {\r\n    const self = this;\r\n    this.loading.present();\r\n    this.apiService.getPaymentDetail(paymentID).subscribe(\r\n      (result) => {\r\n        self.totalCash = result.paymentBill.total;\r\n        self.paidAmount = result.paymentBill.paidAmount;\r\n        self.titlePage = result.paymentBill.payment.title;\r\n        self.paymentStartAt = result.paymentBill.payment.paymentStartAt;\r\n        self.paymentCategory = result.paymentBill.category;\r\n        self.paymentEndAt = result.paymentBill.payment.paymentEndAt;\r\n        self.listPaymentContent = result.paymentBill.content;\r\n        self.paymentStatus = result.paymentBill.status;\r\n        this.paymentUpdateAt = result.paymentBill.updatedAt;\r\n        let today = new Date();\r\n        let endAt = new Date(result.paymentBill.payment.paymentEndAt);\r\n        if (today > endAt && self.paymentStatus == 'publish') {\r\n          self.paymentStatus = 'outdate';\r\n        }\r\n        self.loading.dismiss();\r\n      },\r\n      (error) => {\r\n        self.loading.dismiss();\r\n      }\r\n    );\r\n  }\r\n\r\n  formatMoney(stringValue) {\r\n    let n = parseInt(stringValue);\r\n    return n.toFixed(0).replace(/./g, function (c, i, a) {\r\n      return i > 0 && c !== ',' && (a.length - i) % 3 === 0 ? '.' + c : c;\r\n    });\r\n  }\r\n\r\n  convertText(textInput: string) {\r\n    if (textInput && textInput.length > 0) {\r\n      return textInput.replace(/\\n/gi, '<br/>');\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  showListComment() {\r\n    this.navCtrl.navigateForward('/payment-comment/' + this.paymentID);\r\n  }\r\n\r\n  async changePaymentModal(paymentType) {\r\n    const self = this;\r\n    const modalChangePayemt = await this.modalController.create({\r\n      component: PopupPaymentFunctionPage,\r\n      componentProps: {\r\n        paymentCate: this.paymentCategory,\r\n        paymentMethodList: this.paymentMethodList,\r\n        paymentType: paymentType\r\n      },\r\n    });\r\n    modalChangePayemt.onDidDismiss().then((result: any) => {\r\n      if (result && result.data && result.data.confirm) {\r\n        // self.paymentSelected = result.data.paymentSelected;\r\n        self.payTheBillOnlineOrCash(result.data.paymentSelected);\r\n      }\r\n    });\r\n    return await modalChangePayemt.present();\r\n  }\r\n\r\n  async paymentSuccessShow() {\r\n    const self = this;\r\n    const popupPaymentSuccessPage = await this.modalController.create({\r\n      component: PopupPaymentSuccessPage,\r\n      componentProps: {\r\n      },\r\n    });\r\n    return await popupPaymentSuccessPage.present();\r\n  }\r\n  \r\n\r\n  async payTheBill() {\r\n    const modalPay = await this.modalController.create({\r\n      component: PopupIframePaymentPage,\r\n      componentProps: {\r\n        paymentID: this.paymentID, \r\n        totalCash: this.totalCash, \r\n        titlePage: this.titlePage, \r\n        promotionMoney: this.promotionMoney,\r\n        urlPayment: this.urlPayment\r\n      },\r\n    });\r\n    modalPay.onDidDismiss().then((result: any) => {\r\n      const data = JSON.parse(result.data || '');\r\n      if (!data || data.result == 1) {\r\n        // this.navCtrl.navigateForward('/payment-fail');\r\n        return;\r\n      }\r\n      // this.navCtrl.navigateForward('/payment-success');\r\n    });\r\n    return await modalPay.present();\r\n  }\r\n\r\n  payTheBillOnlineOrCash(paymentSelected) {\r\n    this.loading.present();\r\n    const self = this;\r\n    const params = {\r\n      bill: this.paymentID,\r\n      type: paymentSelected,\r\n      bank: \"\",\r\n      amount: this.totalCash,\r\n      note: \"\"\r\n    }\r\n    this.apiService.postPayTheBill(params)\r\n      .subscribe(result => {\r\n        self.loading.dismiss();\r\n        self.paymentSuccessShow();\r\n        // self.navCtrl.navigateForward('/popup-payment-success');\r\n    },\r\n    error => {\r\n      self.loading.dismiss();\r\n      // self.navCtrl.navigateForward('/payment-fail');\r\n    });\r\n  }\r\n\r\n  openPayment() {\r\n    // this.presentAlert(this.translate.instant('PAYMENT_INFOR.alert_comming_soon'));\r\n    var self = this;\r\n    // this.apiService.epaypayment(this.totalCash).subscribe((result) => {\r\n    //   console.log(result);\r\n    //   this.urlPayment = result.url;\r\n    //   this.payTheBill();\r\n    // });\r\n    if(this.paymentType == 'payment_cash'){\r\n      this.changePaymentModal(this.paymentType);\r\n    }else if(this.paymentType == 'payment_transfer'){\r\n      this.changePaymentModal(this.paymentType);\r\n    }else{\r\n      this.loading.present();\r\n      this.apiService.momoPayment(this.totalCash - this.promotionMoney - this.paidAmount).subscribe((result) => {\r\n        self.loading.dismiss();\r\n        if(result.resultCode == 0){\r\n          self.openURLAccuracyEpay(result.deeplink);\r\n        }else{\r\n          self.navCtrl.navigateForward('/payment-fail');\r\n        }\r\n        // this.urlPayment = result.url;\r\n        // this.payTheBill();\r\n      },\r\n      (error) => {\r\n        self.loading.dismiss();\r\n      });\r\n    }\r\n  }\r\n\r\n  openURLAccuracyEpay(url: string){\r\n    const browser = this.iab.create(url ,'_system', 'location=yes, enableviewportscale=yes');\r\n    browser.show();\r\n  }\r\n\r\n  // dumyPaymentMethod() {\r\n  //   this.paymentMethodList = [];\r\n  //   this.epayUserInfo = this.apiService.getEpayUserStored();\r\n  //   if (!this.epayUserInfo) {\r\n  //     return;\r\n  //   }\r\n  //   this.paymentMethodList = [\r\n  //     {\r\n  //       key: 1,\r\n  //       name: this.translate.instant('PAYMENT_INFOR.payment_wallet_title'),\r\n  //       content: this.formatMoney(this.epayUserInfo.user_info.balance) + 'đ',\r\n  //       money: this.epayUserInfo.user_info.balance,\r\n  //       isSelected: true,\r\n  //     },\r\n  //     // {\r\n  //     //   key: 2,\r\n  //     //   name: this.translate.instant('PAYMENT_INFOR.modal_change_vietcombank'),\r\n  //     //   content: this.translate.instant('PAYMENT_INFOR.modal_change_ref'),\r\n  //     //   isSelected: false,\r\n  //     // },\r\n  //   ];\r\n  //   this.paymentSelected = this.paymentMethodList[0];\r\n  // }\r\n\r\n  async presentAlert(message) {\r\n    var self = this;\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'comming-soon-payment-class',\r\n      header: self.translate.instant('COMMON.information'),\r\n      message: message,\r\n      buttons: ['OK']\r\n    });\r\n    await alert.present();\r\n  }\r\n}\r\n","<ion-header class=\"ion-no-border payment-confirm-header\">\r\n  <ion-buttons class=\"back-button\">\r\n    <ion-back-button color=\"light\" text=\"\" icon=\"chevron-back\" class=\"ion-back-button\"></ion-back-button>\r\n  </ion-buttons>\r\n  <ion-label class=\"header-title\">{{ 'PAYMENT_INFOR.payment_confirm_title' | translate }}</ion-label>\r\n  <ion-label class=\"header-sub-title\">{{ 'PAYMENT_INFOR.payment_confirm_sub_title' | translate }}</ion-label>\r\n</ion-header>\r\n\r\n<ion-content class=\"payment-confirm-content\">\r\n  <ion-label class=\"confirm_detail_title\">{{ 'PAYMENT_INFOR.payment_confirm_detail_title' | translate }}</ion-label>\r\n  <section class=\"section-content margin-top-10\">\r\n    <ion-item lines=\"none\" class=\"fee-item confirm-bill-title\">\r\n      <ion-text>{{titlePage}}</ion-text>\r\n    </ion-item>\r\n    <div class=\"devider-line-confirm-item\"></div>\r\n\r\n    <ion-list *ngFor=\"let item of listPaymentContent; let i = index;\" class=\"section-content-fee\">\r\n      <ion-item lines=\"none\" class=\"fee-item ion-no-padding\">\r\n        <ion-icon [src]=\"'../assets/icon/payment/bag.svg'\" class=\"icon-parking\"></ion-icon>\r\n        <ion-label class=\"fee-title\">{{item.type.title}}</ion-label>\r\n        <ion-label class=\"amount-number ion-float-right\">{{formatMoney(item.amount)}} </ion-label>\r\n      </ion-item>\r\n      <ion-item lines=\"none\" class=\"item-fee-detail ion-no-padding\">\r\n        <p [innerHTML]=\"convertText(item.description)\" class=\"fee-detail\"></p>\r\n      </ion-item>\r\n      <div class=\"devider-line-confirm-item\"></div>\r\n    </ion-list>\r\n    <ion-list class=\"section-content-fee\">\r\n      <ion-item lines=\"none\" class=\"fee-item ion-no-padding\">\r\n        <ion-label class=\"fee-detail\">{{\"PAYMENT_INFOR.payment_confirm_amount\" | translate}}</ion-label>\r\n        <ion-label class=\"amount-number-total ion-float-right\">{{formatMoney(totalCash)}}đ </ion-label>\r\n      </ion-item>\r\n      <ion-item lines=\"none\" class=\"fee-item ion-no-padding\">\r\n        <ion-label class=\"fee-detail\">{{\"PAYMENT_INFOR.payment_confirm_promotion\" | translate}}</ion-label>\r\n        <ion-label class=\"promotion-value ion-float-right\">{{formatMoney(promotionMoney)}}đ </ion-label>\r\n      </ion-item>\r\n      <ion-item lines=\"none\" class=\"fee-item ion-no-padding\">\r\n        <ion-label class=\"fee-detail\">{{\"PAYMENT_INFOR.payment_paidAmount\" | translate}}</ion-label>\r\n        <ion-label class=\"promotion-value ion-float-right\">{{formatMoney(paidAmount)}}đ </ion-label>\r\n      </ion-item>\r\n      <div class=\"devider-line-confirm-item\"></div>\r\n      <ion-item lines=\"none\" class=\"fee-item ion-no-padding\">\r\n        <ion-label class=\"fee-detail\">{{\"PAYMENT_INFOR.payment_confirm_total\" | translate}}</ion-label>\r\n        <ion-label class=\"amount-number ion-float-right\">{{formatMoney(totalCash - promotionMoney - paidAmount)}}đ </ion-label>\r\n      </ion-item>\r\n    </ion-list>\r\n  </section>\r\n  <section class=\"section-content margin-top-10\">\r\n    <ion-item lines=\"none\" class=\"fee-item ion-no-padding\" style=\"margin: 0 15px; \">\r\n      <ion-icon [src]=\"'../assets/icon/payment/credit-card.svg'\" class=\"icon-parking\"></ion-icon>\r\n      <ion-label class=\"fee-title\">{{ 'PAYMENT_INFOR.payment_method' | translate }}</ion-label>\r\n    </ion-item>\r\n    <ion-radio-group [(ngModel)]=\"paymentType\">\r\n      <ion-item>\r\n        <ion-label class=\"fee-title\">{{ 'PAYMENT_INFOR.payment_cash' | translate }}</ion-label>\r\n        <ion-radio slot=\"start\" color=\"success\" value=\"payment_cash\"></ion-radio>\r\n      </ion-item>\r\n      <ion-item>\r\n        <ion-label class=\"fee-title\">{{ 'PAYMENT_INFOR.payment_transfer' | translate }}</ion-label>\r\n        <ion-radio slot=\"start\" color=\"success\" value=\"payment_transfer\"></ion-radio>\r\n      </ion-item>\r\n      <ion-item disabled=\"disabled\">\r\n        <ion-label class=\"fee-title\">{{ 'PAYMENT_INFOR.payment_online' | translate }}</ion-label>\r\n        <ion-radio slot=\"start\" color=\"success\" value=\"payment_online\"></ion-radio>\r\n      </ion-item>\r\n    </ion-radio-group>\r\n  </section>\r\n  <ion-toolbar class=\"ion-toolbar-payment\">\r\n    <ion-button class=\"amo-button btn-default\" (click)=\"openPayment()\" *ngIf=\"(totalCash - promotionMoney - paidAmount) > 0\">{{'PAYMENT_INFOR.pay_now' | translate }}</ion-button>\r\n  </ion-toolbar>\r\n  <!-- <ion-toolbar class=\"ion-toolbar-payment\">\r\n    <ion-item lines=\"none\" class=\"payment-funtion\" *ngIf=\"paymentSelected\">\r\n      <ion-icon [src]=\"'../assets/icon/payment/wallet.svg'\" class=\"wallet-icon\"></ion-icon>\r\n      <ion-label class=\"wallet-title\">{{paymentSelected.name}}</ion-label>\r\n      <ion-text class=\"wallet-money\">\r\n        {{paymentSelected.content}}\r\n        <span *ngIf=\"paymentSelected.money && paymentSelected.money < totalCash\" class=\"money-insufficient\">- {{'PAYMENT_INFOR.payment_wallet_insufficient'| translate }}</span>\r\n      </ion-text>\r\n      <ion-label class=\"wallet-change\" (click)=\"changePaymentModal()\">{{\"PAYMENT_INFOR.payment_wallet_change\" | translate}}</ion-label>\r\n    </ion-item>\r\n    <ion-item lines=\"none\" class=\"payment-funtion\" *ngIf=\"!paymentSelected\">\r\n      <ion-icon [src]=\"'../assets/icon/payment/wallet.svg'\" class=\"wallet-icon\"></ion-icon>\r\n      <ion-label class=\"wallet-title\">{{\"PAYMENT_INFOR.payment_wallet_title\" | translate}}</ion-label>\r\n      <ion-text class=\"wallet-money\">\r\n        {{\"PAYMENT_INFOR.payment_wallet_not_register\" | translate}}\r\n      </ion-text>\r\n      <ion-label class=\"wallet-change\" (click)=\"changePaymentModal()\">{{\"PAYMENT_INFOR.payment_wallet_change\" | translate}}</ion-label>\r\n    </ion-item>\r\n    <ion-button class=\"amo-button btn-default\" (click)=\"openPayment()\" *ngIf=\"paymentSelected && paymentSelected.money >= (totalCash - promotionMoney)\">{{'PAYMENT_INFOR.pay_now' | translate }}</ion-button>\r\n    <ion-button class=\"btn-default btn-pay-not-active\" *ngIf=\"!paymentSelected || paymentSelected.money < (totalCash - promotionMoney)\">{{'PAYMENT_INFOR.pay_now' | translate }}</ion-button>\r\n  </ion-toolbar> -->\r\n</ion-content>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { PaymentConfirmPage } from './payment-confirm.page';\r\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PaymentConfirmPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [PaymentConfirmPage]\r\n})\r\nexport class PaymentConfirmPageModule {}\r\n"],"sourceRoot":"webpack:///"}