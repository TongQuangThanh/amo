{"version":3,"sources":["webpack:///src/app/pages/notification-detail/notification-detail.page.html","webpack:///src/app/pages/notification-detail/notification-detail.page.ts","webpack:///src/app/pages/notification-detail/notification-detail.module.ts"],"names":["NotificationDetailPage","iab","loading","sanitizer","apiService","navCtrl","route","authService","modalController","likesCount","isLiked","profile","getProfile","apartment","showHeader","articleID","snapshot","paramMap","get","articleTitle","articleContent","thumbnail","getArticleDetail","getDefaulUserDeparment","self","getListUserApartment","subscribe","result","userApartments","length","_id","error","present","article","title","bypassSecurityTrustHtml","content","attachments","readsCount","commentsCount","sharesCount","createdAt","createBy","createdBy","displayName","userLike","dismiss","stringDate","formatString","navigateForward","event","forEach","element","id","currentTarget","url_online","fileExtensition","fileName","split","pop","toLowerCase","url","browser","create","show","textInput","replace","position_y","document","getElementById","getClientRects","index","component","componentProps","transfer","articleId","cssClass","modal","onDidDismiss","then","dataReturned","data","dataReturnedLike","likeStatus","postArticleLike","response","articleLike","statusLike","onScroll","postLike","commentNotificationModal","selector","templateUrl","styleUrls","routes","path","NotificationDetailPageModule","forChild","imports","declarations"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkBE;;;;;;AAAmC;;;;;;AACnC;;;;;;;;AAuBM;;AACE;AAAA;;AAAA;;AAAA;AAAA;;AACA;;AACE;;AACA;;AACF;;AACF;;;;;;AAN2C;;AAIvC;;AAAA;;;;;;AANR;;AACE;;AACE;;AAOF;;AACF;;;;;;AARc;;AAAA;;;;;;;;;;;;;;;;UC1BLA,sB;AAoBX,wCACUC,GADV,EAEUC,OAFV,EAGUC,SAHV,EAIUC,UAJV,EAKUC,OALV,EAMUC,KANV,EAOUC,WAPV,EAQSC,eART,EAQyC;AAAA;;AAP/B,eAAAP,GAAA,GAAAA,GAAA;AACA,eAAAC,OAAA,GAAAA,OAAA;AACA,eAAAC,SAAA,GAAAA,SAAA;AACA,eAAAC,UAAA,GAAAA,UAAA;AACA,eAAAC,OAAA,GAAAA,OAAA;AACA,eAAAC,KAAA,GAAAA,KAAA;AACA,eAAAC,WAAA,GAAAA,WAAA;AACD,eAAAC,eAAA,GAAAA,eAAA;AAZT,eAAAC,UAAA,GAAa,CAAb;AACA,eAAAC,OAAA,GAAU,KAAV;AAaE,eAAKC,OAAL,GAAe,KAAKJ,WAAL,CAAiBK,UAAjB,EAAf;AACA,eAAKC,SAAL,GAAiB,EAAjB;AACD;;;;qCACU;AACT,iBAAKC,UAAL,GAAkB,CAAlB;AACA,iBAAKC,SAAL,GAAiB,KAAKT,KAAL,CAAWU,QAAX,CAAoBC,QAApB,CAA6BC,GAA7B,CAAiC,IAAjC,CAAjB;AACA,iBAAKC,YAAL,GAAoB,EAApB;AACA,iBAAKC,cAAL,GAAsB,EAAtB;AACA,iBAAKC,SAAL,GAAiB,yCAAjB;AACA,iBAAKC,gBAAL,CAAsB,KAAKP,SAA3B;AACA,iBAAKQ,sBAAL;AACD;;;mDAEwB;AACvB,gBAAMC,IAAI,GAAG,IAAb;AACA,iBAAKpB,UAAL,CAAgBqB,oBAAhB,GAAuCC,SAAvC,CACE,UAACC,MAAD,EAAY;AACV,kBAAIA,MAAM,CAACC,cAAP,CAAsBC,MAAtB,GAA+B,CAAnC,EAAsC;AACpCL,oBAAI,CAACX,SAAL,GAAiBc,MAAM,CAACC,cAAP,CAAsB,CAAtB,EAAyBE,GAA1C;AACD;AACF,aALH,EAME,UAACC,KAAD,EAAW,CAAE,CANf;AAQD;;;2CAEgBhB,S,EAAW;AAAA;;AAC1B,gBAAMS,IAAI,GAAG,IAAb;AACA,iBAAKtB,OAAL,CAAa8B,OAAb;AACA,iBAAK5B,UAAL,CAAgBkB,gBAAhB,CAAiCP,SAAjC,EAA4CW,SAA5C,CACE,UAACC,MAAD,EAAY;AACV,kBAAMM,OAAO,GAAIN,MAAM,CAACM,OAAxB;AACAT,kBAAI,CAACL,YAAL,GAAoBc,OAAO,CAACC,KAA5B;AACAV,kBAAI,CAACJ,cAAL,GAAsBI,IAAI,CAACrB,SAAL,CAAegC,uBAAf,CAAuCF,OAAO,CAACG,OAA/C,CAAtB;AAAwF;AACxFZ,kBAAI,CAACH,SAAL,GAAiBY,OAAO,CAACZ,SAAzB;AACAG,kBAAI,CAACa,WAAL,GAAmBJ,OAAO,CAACI,WAA3B;AACAb,kBAAI,CAACc,UAAL,GAAkBL,OAAO,CAACK,UAA1B;AACAd,kBAAI,CAACe,aAAL,GAAqBN,OAAO,CAACM,aAAR,IAAyB,CAA9C;AACAf,kBAAI,CAACgB,WAAL,GAAmBP,OAAO,CAACO,WAA3B;AACAhB,kBAAI,CAACiB,SAAL,GAAiBR,OAAO,CAACQ,SAAzB;AACAjB,kBAAI,CAACkB,QAAL,GAAgBT,OAAO,CAACU,SAAR,IAAqB,IAArB,GAA4BV,OAAO,CAACU,SAAR,CAAkBC,WAA9C,GAA4D,EAA5E;AACA,mBAAI,CAACnC,UAAL,GAAkBwB,OAAO,CAACxB,UAA1B;AACA,mBAAI,CAACC,OAAL,GAAe,CAAAiB,MAAM,SAAN,IAAAA,MAAM,WAAN,GAAM,MAAN,GAAAA,MAAM,CAAEkB,QAAR,KAAoB,CAApB,GAAwB,IAAxB,GAA+B,KAA9C;AACArB,kBAAI,CAACtB,OAAL,CAAa4C,OAAb;AACD,aAfH,EAgBE,UAACf,KAAD,EAAW;AACTP,kBAAI,CAACtB,OAAL,CAAa4C,OAAb;AACD,aAlBH;AAoBD;;;uCAEYC,U,EAAoB;AAC/B,mBAAO,kEAAaC,YAAb,CAA0BD,UAA1B,CAAP;AACD;;;4CAEiB;AAChB,iBAAK1C,OAAL,CAAa4C,eAAb,CAA6B,2BAA2B,KAAKlC,SAA7D;AACD;;;2CAEgBmC,K,EAAO;AAAA;;AACtB,iBAAKb,WAAL,CAAiBc,OAAjB,CAAyB,UAACC,OAAD,EAAa;AACpC,kBAAIA,OAAO,CAACC,EAAR,IAAcH,KAAK,CAACI,aAAN,CAAoBD,EAAtC,EAA0C;AACxC,oBAAIE,UAAU,GAAG,EAAjB;AACA,oBAAMC,eAAe,GAAGJ,OAAO,CAACK,QAAR,CAAiBC,KAAjB,CAAuB,GAAvB,EAA4BC,GAA5B,GAAkCC,WAAlC,EAAxB;;AACA,oBAAIJ,eAAe,IAAI,KAAnB,IAA4BA,eAAe,IAAI,KAA/C,IAAwDA,eAAe,IAAI,KAA/E,EAAsF;AACpFD,4BAAU,GAAGH,OAAO,CAACS,GAArB;AACD,iBAFD,MAEO;AACLN,4BAAU,GAAG,wCAAwCH,OAAO,CAACS,GAAhD,GAAsD,gBAAnE;AACD;;AACD,oBAAMC,OAAO,GAAG,MAAI,CAAC7D,GAAL,CAAS8D,MAAT,CAAgBR,UAAhB,EAA4B,SAA5B,EAAuC,sCAAvC,CAAhB;;AACAO,uBAAO,CAACE,IAAR;AACA;AACD;AACF,aAbD;AAcD;;;sCAEWC,S,EAAmB;AAC7B,mBAAOA,SAAS,CAACC,OAAV,CAAkB,MAAlB,EAA0B,OAA1B,CAAP;AACD;;;mCAEQhB,K,EAAO;AACd,gBAAIiB,UAAU,GAAGC,QAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCC,cAAxC,GAAyD,CAAzD,CAAjB;;AACA,gBAAIH,UAAU,CAAC,GAAD,CAAV,GAAkB,EAAtB,EAA0B;AACxB,mBAAKrD,UAAL,GAAkB,CAAlB;AACD,aAFD,MAEO;AACL,mBAAKA,UAAL,GAAkB,CAAlB;AACD;AACF;;;yCACcyD,K,EAAO;AACpB,gBAAIA,KAAK,IAAI,KAAKzD,UAAlB,EAA8B;AAC5B,qBAAO,EAAP;AACD,aAFD,MAEO;AACL,qBAAO,MAAP;AACD;AACF;;;qDAEgC;;;;;;;;;AAC/B;AACIU,0B,GAAO,I;;AACG,6BAAM,KAAKhB,eAAL,CAAqBuD,MAArB,CAA4B;AAC9CS,iCAAS,EAAE,0FADmC;AAE9CC,sCAAc,EAAE;AACdC,kCAAQ,EAAE;AACRhC,oCAAQ,EAAElB,IAAI,CAACkB,QADP;AAER7B,qCAAS,EAAEW,IAAI,CAACX,SAFR;AAGR8D,qCAAS,EAAEnD,IAAI,CAACT,SAHR;AAIRwB,yCAAa,EAAEf,IAAI,CAACe,aAJZ;AAKR7B,mCAAO,EAAEc,IAAI,CAACd;AALN;AADI,yBAF8B;AAW9CkE,gCAAQ,EAAE;AAXoC,uBAA5B,CAAN;;;AAARC,2B;AAaNA,2BAAK,CAACC,YAAN,GAAqBC,IAArB,CAA0B,UAACC,YAAD,EAAuB;AAC/C,4BAAIA,YAAY,IAAIA,YAAY,CAACC,IAAjC,EAAuC;AACrC,8BAAMC,gBAAgB,GAAGF,YAAY,CAACC,IAAb,CAAkBvE,OAA3C;;AACA,8BAAGwE,gBAAgB,IAAI,MAAI,CAACxE,OAA5B,EAAqC;AACnC,gCAAIwE,gBAAJ,EAAsB;AACpB,oCAAI,CAACzE,UAAL;AACD,6BAFD,MAEO;AACL,oCAAI,CAACA,UAAL;AACD;AACF;;AACD,gCAAI,CAACC,OAAL,GAAewE,gBAAf;AACA,gCAAI,CAAC3C,aAAL,GAAqByC,YAAY,CAACC,IAAb,CAAkB1C,aAAvC;AAED;AACF,uBAdD;;AAeO,6BAAMsC,KAAK,CAAC7C,OAAN,EAAN;;;;;;;;;;;;AACR;;;qCAEU;AAAA;;AACT,gBAAImD,UAAU,GAAG,MAAjB;;AACA,gBAAI,CAAC,KAAKzE,OAAV,EAAmB;AACjByE,wBAAU,GAAG,MAAb;AACD;;AAED,iBAAK/E,UAAL,CAAgBgF,eAAhB,CAAgC,KAAKrE,SAArC,EAAgDoE,UAAhD,EAA4DzD,SAA5D,CAAsE,UAAC2D,QAAD,EAAc;;;AAClF,kBAAI,OAAAA,QAAQ,SAAR,IAAAA,QAAQ,WAAR,GAAQ,MAAR,GAAAA,QAAQ,CAAEC,WAAV,MAAqB,IAArB,IAAqB,aAArB,GAAqB,MAArB,GAAqB,GAAEC,UAAvB,MAAsC,MAA1C,EAAkD;AAChD,sBAAI,CAAC9E,UAAL;AACA,sBAAI,CAACC,OAAL,GAAe,IAAf;AACD,eAHD,MAGO;AACL,sBAAI,CAACD,UAAL;AACA,sBAAI,CAACC,OAAL,GAAe,KAAf;AACD;AACF,aARD;AASD;;;;;;;yBA9KUV,sB,EAAsB,8I,EAAA,iJ,EAAA,wI,EAAA,qI,EAAA,6H,EAAA,+H,EAAA,+I,EAAA,+H;AAAA,O;;;cAAtBA,sB;AAAsB,gD;AAAA,iB;AAAA,gB;AAAA,+4D;AAAA;AAAA;ADhBnC;;AACE;;AACE;;AACE;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AAAuD;;AAAgB;;AACzE;;AACA;;AACE;;AACF;;AACF;;AACF;;AACA;;AAA+E;AAAA,qBAAa,IAAAwF,QAAA,QAAb;AAA6B,aAA7B;;AAC7E;;AACA;;AACA;;AACE;;AACE;;AAAuD;;AAAgB;;AACzE;;AACA;;AACE;;AACE;;AACE;;AAA2D;;AAA4B;;AACvF;;AACF;;AACA;;AACE;;AAA2D;;;;AAA0B;;AACrF;;AACF;;AACA;;AAEE;;AAA2D;;;;AAAsD;;AACnH;;AACF;;AACF;;AACA;;AAWF;;AACA;;AACA;;AACF;;AAEA;;AACE;;AACE;;AACE;;AAAiC;AAAA,qBAAS,IAAAC,QAAA,EAAT;AAAmB,aAAnB;;AAC/B;;AACE;;AACE;;AACF;;AACA;;AACE;;AACE;;AAAmE;;;;AAA0C;;AAC/G;;AACA;;AACE;;AAAmC;;;;AAAqD;;AAC1F;;AACF;;AACA;;AACF;;AACF;;AACA;;AAAiC;AAAA,qBAAS,IAAAC,wBAAA,EAAT;AAAmC,aAAnC;;AAC/B;;AACE;;AACE;;AACF;;AACA;;AACE;;AACE;;AAAoC;;;;AAA6C;;AACnF;;AACA;;AACE;;AAAmC;;;;AAA8D;;AACnG;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;;;AA5F2D;;AAOc;;AAAA;;AAGZ;;AAAA;;AAOrC;;AAAA;;AAAiC;;AAC9C;;AAAA;;AACA;;AAAA;;AAGkD;;AAAA;;AAKQ;;AAAA;;AAIA;;AAAA;;AAKA;;AAAA;;AAIzB;;AAAA;;AAavC;;AAAA;;AAa6C;;AAAA;;AAA+B;;AAAA;;AAGhC;;AAAA;;AAaC;;AAAA;;AAGD;;AAAA;;;;;;;;;;wECrEpC1F,sB,EAAsB;gBALlC,uDAKkC;iBALxB;AACT2F,oBAAQ,EAAE,yBADD;AAETC,uBAAW,EAAE,iCAFJ;AAGTC,qBAAS,EAAE,CAAC,iCAAD;AAHF,W;AAKwB,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChBnC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AASA,UAAMC,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEEvB,iBAAS,EAAE;AAFb,OADqB,CAAvB;;UAiBawB,4B;;;;;cAAAA;;;;2BAAAA,4B;AAA4B,S;AAAA,kBAT9B,CACP,4DADO,EAEP,0DAFO,EAGP,0DAHO,EAIP,mEAJO,EAKP,6DAAaC,QAAb,CAAsBH,MAAtB,CALO,CAS8B;;;;4HAA5BE,4B,EAA4B;AAAA,yBAFxB,gFAEwB;AAFF,oBANnC,4DAMmC,EALnC,0DAKmC,EAJnC,0DAImC,EAHnC,mEAGmC,EAHpB,4DAGoB;AAEE,S;AALtB,O;;;;;wEAKNA,4B,EAA4B;gBAVxC,sDAUwC;iBAV/B;AACRE,mBAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,0DAHO,EAIP,mEAJO,EAKP,6DAAaD,QAAb,CAAsBH,MAAtB,CALO,CADD;AAQRK,wBAAY,EAAE,CAAC,gFAAD;AARN,W;AAU+B,U","file":"pages-notification-detail-notification-detail-module-es5.js","sourcesContent":["<ion-header id=\"main-header-toolbar\" class=\"ion-no-border\" [ngStyle]=\"{'display': getStyleHeader(1)}\">\r\n  <ion-toolbar>\r\n    <ion-buttons slot=\"start\" class=\"back-button\">\r\n      <ion-back-button id=\"\" text=\"\" icon=\"chevron-back\"></ion-back-button>\r\n    </ion-buttons>\r\n  </ion-toolbar>\r\n</ion-header>\r\n<ion-header id=\"sub-header-toolbar\" class=\"ion-no-border w3-animate-top\" [ngStyle]=\"{'display': getStyleHeader(2)}\">\r\n  <ion-toolbar class=\"header-splash\">\r\n    <ion-item lines=\"none\" style=\"margin-top: 10px;\">\r\n      <ion-card-title class=\"ion-text-wrap content-two-line\">{{articleTitle}}</ion-card-title>\r\n    </ion-item>\r\n    <ion-buttons slot=\"start\" class=\"btn-header-back\">\r\n      <ion-back-button id=\"\" text=\"\" icon=\"chevron-back\"></ion-back-button>\r\n    </ion-buttons>\r\n  </ion-toolbar>\r\n</ion-header>\r\n<ion-content fullscreen [style.height.px]=\"heightScreen\" [scrollEvents]=\"true\" (ionScroll)=\"onScroll($event)\">\r\n  <ion-img *ngIf=\"thumbnail != null\" src=\"{{thumbnail}}\"></ion-img>\r\n  <ion-img *ngIf=\"thumbnail == null\" src=\"assets/common/no-thumbnail.png\"></ion-img>\r\n  <ion-card button class=\"custom-card margin-none\">\r\n    <ion-item lines=\"none\" class=\"ion-item-title\">\r\n      <ion-card-title class=\"ion-text-wrap content-two-line\">{{articleTitle}}</ion-card-title>\r\n    </ion-item>\r\n    <div class=\"\" id=\"content-noti\">\r\n      <ion-list class=\"text-node information-node\">\r\n        <ion-card class=\"ion-float-left padding-none card-bottom\">\r\n          <span class=\"image-caption-big\" class=\"card-bottom-label\"> {{formatString(createdAt)}} </span>\r\n          <ion-icon item-start name=\"custom-oval\" class=\"card-bottom-icon custom-oval\" src=\"assets/icon/custom-oval.svg\"></ion-icon>\r\n        </ion-card>\r\n        <ion-card class=\"ion-float-left padding-none card-bottom margin-left-0\">\r\n          <span class=\"image-caption-big\" class=\"card-bottom-label\"> {{createBy | slice:0:14}} </span>\r\n          <ion-icon item-start name=\"custom-oval\" class=\"card-bottom-icon custom-oval\" src=\"assets/icon/custom-oval.svg\"></ion-icon>\r\n        </ion-card>\r\n        <ion-card class=\"ion-float-left padding-none card-bottom margin-left-0\">\r\n          <!-- <ion-icon item-start name=\"eye-outline\" class=\"card-bottom-icon\"></ion-icon> -->\r\n          <span class=\"image-caption-big\" class=\"card-bottom-label\"> {{readsCount}} {{ 'NOTIFICATION.readed' | translate }}</span>\r\n        </ion-card>\r\n      </ion-list>\r\n    </div>\r\n    <div class=\"clear-both attachments-div\" *ngIf=\"attachments && attachments.length > 0\">\r\n      <ion-list class=\"text-node attachments-node\">\r\n        <ion-card *ngFor=\"let item of attachments\" id=\"{{item._id}}\" class=\"ion-float-left padding-none attachments-card\"\r\n          (click)=\"detailAttachment($event)\">\r\n          <ion-label class=\"attachments-text\">\r\n            <ion-icon name=\"custom-attach-active\" class=\"attachments-icon\" src=\"assets/icon/custom-attach-active.svg\"></ion-icon>\r\n            {{item.fileName}}\r\n          </ion-label>\r\n        </ion-card>\r\n      </ion-list>\r\n    </div>\r\n  </ion-card>\r\n  <div class=\"line-break-content\"></div>\r\n  <p [innerHTML]=\"articleContent\" class=\"full-width article-content\"></p>\r\n</ion-content>\r\n\r\n<ion-footer class=\"ion-no-border footer-content share-info\">\r\n  <ion-grid>\r\n    <ion-row>\r\n      <ion-col class=\"footer-grid-col\" (click)=\"postLike()\">\r\n        <ion-row>\r\n          <ion-col class=\"ion-col-img\">\r\n            <ion-img src=\"/assets/icon/svg/news/like.svg\" class=\"share-info-img\"></ion-img>\r\n          </ion-col>\r\n          <ion-col>\r\n            <div class=\"ion-text-left\">\r\n              <ion-label class=\"share-info-title\" [ngClass]=\"{'liked': isLiked}\">{{ 'NOTIFICATION.like_text' | translate }}</ion-label>\r\n            </div>\r\n            <div class=\"ion-text-left landing-text\">\r\n              <ion-label class=\"share-info-text\">{{likesCount}} {{ 'NOTIFICATION.liked' | translate }}</ion-label>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col class=\"ion-col-break\"></ion-col>\r\n        </ion-row>\r\n      </ion-col>\r\n      <ion-col class=\"footer-grid-col\" (click)=\"commentNotificationModal()\">\r\n        <ion-row>\r\n          <ion-col class=\"ion-col-img\">\r\n            <ion-img src=\"/assets/icon/svg/news/comment.svg\" class=\"share-info-img\"></ion-img>\r\n          </ion-col>\r\n          <ion-col>\r\n            <div class=\"ion-text-left\">\r\n              <ion-label class=\"share-info-title\">{{ 'NOTIFICATION.comment_text' | translate }}</ion-label>\r\n            </div>\r\n            <div class=\"ion-text-left landing-text\">\r\n              <ion-label class=\"share-info-text\">{{ commentsCount }} {{ 'NOTIFICATION.commented' | translate }}</ion-label>\r\n            </div>\r\n          </ion-col>\r\n        </ion-row>\r\n      </ion-col>\r\n    </ion-row>\r\n  </ion-grid>\r\n</ion-footer>","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { InAppBrowser } from '@ionic-native/in-app-browser/ngx';\r\nimport { ModalController, NavController } from '@ionic/angular';\r\nimport { AuthService } from 'src/app/services/auth/auth.service';\r\nimport { ApiService } from '../../services/api/api.service';\r\nimport { LoadingService } from '../../services/loading/loading.service';\r\nimport { UtilsService } from '../../utils/utils.service';\r\nimport { PopupShareInfoPage } from '../popup-share-info/popup-share-info.page';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\n\r\n@Component({\r\n  selector: 'app-notification-detail',\r\n  templateUrl: './notification-detail.page.html',\r\n  styleUrls: ['./notification-detail.page.scss'],\r\n})\r\nexport class NotificationDetailPage implements OnInit {\r\n  heightScreen: number;\r\n  // O;\r\n  articleTitle: string;\r\n  articleContent: string;\r\n  thumbnail: string;\r\n  readsCount: number;\r\n  commentsCount: number;\r\n  sharesCount: number;\r\n  attachments: any;\r\n  createdAt: string;\r\n  createBy: string;\r\n  articleID: string;\r\n  profile: any;\r\n  showHeader: number;\r\n  apartment: string;\r\n  likesCount = 0;\r\n  isLiked = false;\r\n  \r\n\r\n  constructor(\r\n    private iab: InAppBrowser,\r\n    private loading: LoadingService,\r\n    private sanitizer: DomSanitizer,\r\n    private apiService: ApiService,\r\n    private navCtrl: NavController,\r\n    private route: ActivatedRoute,\r\n    private authService: AuthService,\r\n    public modalController: ModalController\r\n  ) {\r\n    this.profile = this.authService.getProfile();\r\n    this.apartment = '';\r\n  }\r\n  ngOnInit() {\r\n    this.showHeader = 1;\r\n    this.articleID = this.route.snapshot.paramMap.get('id');\r\n    this.articleTitle = '';\r\n    this.articleContent = '';\r\n    this.thumbnail = '../../../assets/common/no-thumbnail.png';\r\n    this.getArticleDetail(this.articleID);\r\n    this.getDefaulUserDeparment();\r\n  }\r\n\r\n  getDefaulUserDeparment() {\r\n    const self = this;\r\n    this.apiService.getListUserApartment().subscribe(\r\n      (result) => {\r\n        if (result.userApartments.length > 0) {\r\n          self.apartment = result.userApartments[0]._id;\r\n        }\r\n      },\r\n      (error) => {}\r\n    );\r\n  }\r\n\r\n  getArticleDetail(articleID) {\r\n    const self = this;\r\n    this.loading.present();\r\n    this.apiService.getArticleDetail(articleID).subscribe(\r\n      (result) => {\r\n        const article =  result.article;\r\n        self.articleTitle = article.title;\r\n        self.articleContent = self.sanitizer.bypassSecurityTrustHtml(article.content) as string;;\r\n        self.thumbnail = article.thumbnail;\r\n        self.attachments = article.attachments;\r\n        self.readsCount = article.readsCount;\r\n        self.commentsCount = article.commentsCount || 0;\r\n        self.sharesCount = article.sharesCount;\r\n        self.createdAt = article.createdAt;\r\n        self.createBy = article.createdBy != null ? article.createdBy.displayName : '';\r\n        this.likesCount = article.likesCount;\r\n        this.isLiked = result?.userLike == 1 ? true : false;\r\n        self.loading.dismiss();\r\n      },\r\n      (error) => {\r\n        self.loading.dismiss();\r\n      }\r\n    );\r\n  }\r\n\r\n  formatString(stringDate: string) {\r\n    return UtilsService.formatString(stringDate);\r\n  }\r\n\r\n  showListComment() {\r\n    this.navCtrl.navigateForward('/notification-comment/' + this.articleID);\r\n  }\r\n\r\n  detailAttachment(event) {\r\n    this.attachments.forEach((element) => {\r\n      if (element.id == event.currentTarget.id) {\r\n        let url_online = '';\r\n        const fileExtensition = element.fileName.split('.').pop().toLowerCase();\r\n        if (fileExtensition == 'png' || fileExtensition == 'jpg' || fileExtensition == 'pdf') {\r\n          url_online = element.url;\r\n        } else {\r\n          url_online = 'https://docs.google.com/viewer?url=' + element.url + '&embedded=true';\r\n        }\r\n        const browser = this.iab.create(url_online, '_system', 'location=yes,enableviewportscale=yes');\r\n        browser.show();\r\n        return;\r\n      }\r\n    });\r\n  }\r\n\r\n  convertText(textInput: string) {\r\n    return textInput.replace(/\\n/gi, '<br/>');\r\n  }\r\n\r\n  onScroll(event) {\r\n    let position_y = document.getElementById('content-noti').getClientRects()[0];\r\n    if (position_y['y'] > 45) {\r\n      this.showHeader = 1;\r\n    } else {\r\n      this.showHeader = 2;\r\n    }\r\n  }\r\n  getStyleHeader(index) {\r\n    if (index == this.showHeader) {\r\n      return '';\r\n    } else {\r\n      return 'none';\r\n    }\r\n  }\r\n\r\n  async commentNotificationModal() {\r\n    // this.paymentType = \"transfer\";\r\n    var self = this;\r\n    const modal = await this.modalController.create({\r\n      component: PopupShareInfoPage,\r\n      componentProps: {\r\n        transfer: {\r\n          createBy: self.createBy,\r\n          apartment: self.apartment,\r\n          articleId: self.articleID,\r\n          commentsCount: self.commentsCount,\r\n          isLiked: self.isLiked,\r\n        },\r\n      },\r\n      cssClass: 'popupPaymentTransfer-page-custom',\r\n    });\r\n    modal.onDidDismiss().then((dataReturned: any) => {\r\n      if (dataReturned && dataReturned.data) {\r\n        const dataReturnedLike = dataReturned.data.isLiked;\r\n        if(dataReturnedLike != this.isLiked) {\r\n          if (dataReturnedLike) {\r\n            this.likesCount++;\r\n          } else {\r\n            this.likesCount--;\r\n          }\r\n        }\r\n        this.isLiked = dataReturnedLike;\r\n        this.commentsCount = dataReturned.data.commentsCount;\r\n       \r\n      }\r\n    });\r\n    return await modal.present();\r\n  }\r\n\r\n  postLike() {\r\n    let likeStatus = 'none';\r\n    if (!this.isLiked) {\r\n      likeStatus = 'like';\r\n    }\r\n\r\n    this.apiService.postArticleLike(this.articleID, likeStatus).subscribe((response) => {\r\n      if (response?.articleLike?.statusLike === 'like') {\r\n        this.likesCount++;\r\n        this.isLiked = true;\r\n      } else {\r\n        this.likesCount--;\r\n        this.isLiked = false;\r\n      }\r\n    });\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { NotificationDetailPage } from './notification-detail.page';\r\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: NotificationDetailPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [NotificationDetailPage]\r\n})\r\nexport class NotificationDetailPageModule {}\r\n"]}