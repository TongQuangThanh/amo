{"version":3,"sources":["webpack:///src/app/pages/user-shop-by-category/user-shop-by-category.page.html","webpack:///src/app/pages/user-shop-by-category/user-shop-by-category.page.ts","webpack:///src/app/pages/user-shop-by-category/user-shop-by-category.module.ts"],"names":["UserShopByCategoryPage","loading","apiService","navCtrl","route","modalController","translate","currentPageSearch","numberRecordOnPage","NUMBER_RECORD_ON_PAGE","slideOpts","slidesPerView","centeredSlides","spaceBetween","autoplay","listCategories","selected_category","listTagShop","shopTagSelect","listSearchTag","name","value","selected","data_shop_house","snapshot","paramMap","get","category_id","category_name","listDataMarket","getListCategories","searchShopByTagsAndCateV2","categoryGroupId","getListSubCateV2","subscribe","res","shopHouseSubCategoriesV2","length","getTagsOfShopV2","err","event","object","carServiceType","navigateForward","_id","moveToBookingShopHouse","self","getShopProducts","number","localStorage","setItem","JSON","stringify","goToPageBookingShopHouse","create","component","cssClass","modal","present","objectShop","callBack","getDataServiceShopProduct","result","data_shop_product","shopProducts","forEach","product","requestShopProduct","title","apartment","campaign","stars","thumbnail","logo","attachments","url","time_open","timeOpen","promotionCodes","type","deadline_convert","endAt","today","Date","ageDate","Math","abs","getTime","deadline","ceil","money","price","discountProducts","startAt","discountValue","slider_value","numberOrder","promotion2","range_position_value","promotion1","discount","promotionPercent1","promotionPercent2","detail","actual_order","moc_1","moc_2","moc_3","background_image","_id_requestShopProduct","bg_url","convertFormatMoney","excerpt","group_1","push","index","getIndexCategoryInList","category","id_tab","data","image","note","group_2","dismiss","error","index_value","toString","convert1","convert2","count1","i","count2","cateId","tagId","console","warn","tagIndex","findIndex","item","splice","orderMode","shopHousesV2","mappingShopProduct","target","complete","text_note","promotionKM","instant","type_note","text_place","text_tag","promotion","content","replace","thumbnailUrl","shopHouseTagList","shopHouseTag","map","tagSelect","find","tag","isSelected","text_star_rate","numberEvaluation","lowestPrice","tagType","selectedTag","el","undefined","unselectSearchTag","val","element","loadData","selector","templateUrl","styleUrls","routes","path","UserShopByCategoryPageModule","forChild","imports","declarations"],"mappings":"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","file":"pages-user-shop-by-category-user-shop-by-category-module-es5.js","sourcesContent":["<ion-header class=\"service-cate-header\">\r\n  <ion-buttons class=\"back-button\">\r\n    <ion-back-button color=\"light\" text=\"\" icon=\"chevron-back\" class=\"ion-back-button\"></ion-back-button>\r\n  </ion-buttons>\r\n  <ion-label class=\"header-title\">{{ category_name }}</ion-label>\r\n  <div class=\"categories-wrapper\">\r\n    <ion-slides pager=\"false\" [options]=\"slideOpts\" class=\"header-slider\">\r\n      <ion-slide class=\"category-slide\" *ngFor=\"let cate of listCategories\" (click)=\"categoryClick(cate._id)\">\r\n        <div class=\"category-item active\" [ngClass]=\"{'active': selected_category == cate._id}\">\r\n          <img class=\"category-img\" src=\"{{ cate.thumbnail }}\" />\r\n          <div class=\"cate-title\">{{ cate.title }}</div>\r\n          <img class=\"category-img-checked\" src=\"assets/icon/service-info/checked.svg\"\r\n            *ngIf=\"selected_category == cate._id\" />\r\n        </div>\r\n      </ion-slide>\r\n    </ion-slides>\r\n  </div>\r\n  <div class=\"curve-header\"></div>\r\n</ion-header>\r\n\r\n<ion-content [scrollEvents]=\"false\" class=\"shop-content\" slot=\"fixed\">\r\n  <!-- tags container -->\r\n  <div class=\"tag-container row\">\r\n    <span *ngFor=\"let tagSearch of listSearchTag\" class=\"tag-text {{ tagSearch.selected ? 'selected' : ''  }}\"\r\n      (click)=\"searchByTag(tagSearch.value)\">{{ tagSearch.name }}</span>\r\n  </div>\r\n  <!-- end tags container -->\r\n  <div class=\"list-title\">{{ 'SHOP_BY_CATE.supplier_highlight' | translate }}</div>\r\n  <ion-list class=\"list-view-custom\">\r\n    <ion-item *ngIf=\"listDataMarket.length == 0\" class=\"ion-item-class\">\r\n      <ion-label>\r\n        {{ 'SHOP_BY_CATE.no_service' | translate }}\r\n      </ion-label>\r\n    </ion-item>\r\n    <ion-item *ngFor=\"let object of listDataMarket\" id=\"{{object._id}}\" class=\"ion-item-class ion-no-padding\">\r\n      <ion-grid class=\"ion-no-padding category-item-grid\">\r\n        <ion-row>\r\n          <ion-col size=\"3\" class=\"ion-no-padding\" (click)=\"moveShopHousePage(object)\">\r\n            <div class=\"div-logo\">\r\n              <img src=\"{{object?.thumbnail}}\" class=\"shop-image\" />\r\n              <div class=\"note-2\">{{object.text_note}}</div>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col size=\"9\" class=\"ion-no-padding\">\r\n            <div (click)=\"moveShopHousePage(object)\">\r\n              <div class=\"group-1-text-title\">\r\n                <ion-label class=\"font-weight-bold\">{{object.title}}</ion-label>\r\n              </div>\r\n              <!-- Mô tả gian hàng -->\r\n              <div class=\"group-1-shop-description\">\r\n                {{ object?.content }}\r\n              </div>\r\n              <!-- =========== -->\r\n              <!-- <div class=\"group-1-text-place\">\r\n                <img class=\"group-1-icon-place\" src=\"../assets/icon/svg/icon-place.svg\" />\r\n                <ion-label>{{object.text_place}}</ion-label>\r\n              </div> -->\r\n              <div class=\"group-1-text-star\">\r\n                <div class=\"group-1-text-star-1\" *ngIf=\"object.text_star_rate != ''\">\r\n                  <img class=\"group-1-icon-star\" src=\"../assets/icon/svg/icon-star.svg\" />\r\n                  <ion-label class=\"class-label-rate\">{{object.text_star_rate}}</ion-label>\r\n                </div>\r\n                <div class=\"group-1-text-sold\">\r\n                  <span class=\"margin-right-10\">{{object?.numberEvaluation}} {{ 'SHOP_BY_CATE.rating' | translate\r\n                    }}</span>|<span class=\"margin-left-10\">{{object?.numberOrder}} {{ 'SHOP_BY_CATE.setup' | translate\r\n                    }}</span>\r\n                </div>\r\n              </div>\r\n              <!-- Mốc giá -->\r\n              <div class=\"group-1-price\">\r\n                <div class=\"price-from\">\r\n                  {{ 'SHOP_BY_CATE.price_from' | translate }} {{ object.lowestPrice }} đ\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- ================= -->\r\n            <!-- List tags -->\r\n            <div class=\"group-1-list-tag row\">\r\n              <span class=\"tag-text {{ shopTag?.isSelected ? 'tag-selected-highlight' : ''}}\"\r\n                *ngFor=\"let shopTag of object.shopHouseTag\" (click)=\"shopTagClick(shopTag._id)\">\r\n                #{{shopTag.title}}\r\n              </span>\r\n            </div>\r\n            <!-- ================== -->\r\n          </ion-col>\r\n        </ion-row>\r\n      </ion-grid>\r\n    </ion-item>\r\n  </ion-list>\r\n  <ion-infinite-scroll threshold=\"50px\" (ionInfinite)=\"loadData($event)\" class=\"infinite-scroll-block\">\r\n    <ion-infinite-scroll-content loadingSpinner=\"\" loadingText=\"\"></ion-infinite-scroll-content>\r\n  </ion-infinite-scroll>\r\n</ion-content>","import { Component, OnInit } from '@angular/core';\r\nimport { ModalController, NavController } from '@ionic/angular';\r\nimport { ApiService } from '../../services/api/api.service';\r\nimport { ConstService } from '../../utils/const.service';\r\nimport { LoadingService } from '../../services/loading/loading.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { BookingShopHousePage } from '../booking-shop-house/booking-shop-house.page';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\n@Component({\r\n  selector: 'app-user-shop-by-category',\r\n  templateUrl: './user-shop-by-category.page.html',\r\n  styleUrls: ['./user-shop-by-category.page.scss'],\r\n})\r\nexport class UserShopByCategoryPage implements OnInit {\r\n  data_shop_house: any;\r\n  listDataMarket: any;\r\n  category_id: any;\r\n  category_name: any;\r\n  currentPageSearch = 1;\r\n  numberRecordOnPage = ConstService.NUMBER_RECORD_ON_PAGE;\r\n  slideOpts = {\r\n    // initialSlide: 0,\r\n    slidesPerView: 4.1,\r\n    centeredSlides: false,\r\n    spaceBetween: 0,\r\n    autoplay: false,\r\n  };\r\n  listCategories = [];\r\n  selected_category: string = '';\r\n  listTagShop = [];\r\n  shopTagSelect = [];\r\n\r\n  listSearchTag = [\r\n    { name: 'Giá rẻ nhất', value: 1, selected: false },\r\n    { name: 'Đánh giá cao nhất', value: 2, selected: false },\r\n    { name: 'Ưa chuộng nhất', value: 3, selected: false },\r\n  ]\r\n\r\n  orderMode: number;\r\n\r\n  constructor(\r\n    private loading: LoadingService,\r\n    private apiService: ApiService,\r\n    private navCtrl: NavController,\r\n    private route: ActivatedRoute,\r\n    public modalController: ModalController,\r\n    private translate: TranslateService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.shopTagSelect = [];\r\n    this.data_shop_house = {};\r\n    this.selected_category = this.route.snapshot.paramMap.get('selected_category');\r\n    this.category_id = this.route.snapshot.paramMap.get('category');\r\n    this.category_name = this.route.snapshot.paramMap.get('category_name');\r\n    this.listDataMarket = [];\r\n    this.getListCategories(this.category_id);\r\n    this.searchShopByTagsAndCateV2();\r\n    // this.getTagsOfShopV2();\r\n  }\r\n\r\n  ionViewWillEnter() { }\r\n\r\n  getListCategories(categoryGroupId: string) {\r\n    this.apiService.getListSubCateV2(categoryGroupId).subscribe(\r\n      (res) => {\r\n        this.listCategories = res.shopHouseSubCategoriesV2;\r\n        this.slideOpts.slidesPerView = this.listCategories.length;\r\n      },\r\n      () => { }\r\n    );\r\n  }\r\n\r\n  getTagsOfShopV2() {\r\n    this.apiService.getTagsOfShopV2().subscribe(\r\n      (res) => { },\r\n      (err) => { }\r\n    );\r\n  }\r\n\r\n  // getBySubCategory() {\r\n  //   const self = this;\r\n  //   this.loading.present();\r\n  //   this.apiService.getListShopV2(this.selected_category).subscribe(\r\n  //     (result) => {\r\n  //       let data_shop_product = result.shopHousesV2;\r\n  //       this.mappingShopProduct(data_shop_product);\r\n  //       self.loading.dismiss();\r\n  //     },\r\n  //     (error) => {\r\n  //       self.loading.dismiss();\r\n  //     }\r\n  //   );\r\n  // }\r\n  loadData(event) {\r\n    this.currentPageSearch++;\r\n    this.searchShopByTagsAndCateV2(event);\r\n  }\r\n  moveShopHousePage(object) {\r\n    if (object.carServiceType == 'technologyCar') {\r\n      this.navCtrl.navigateForward('/call-the-car-detail/' + object._id);\r\n    } else if (object.carServiceType == 'oneTurn') {\r\n      this.moveToBookingShopHouse(object);\r\n    } else {\r\n      this.navCtrl.navigateForward('/shop-house/' + object._id);\r\n    }\r\n  }\r\n  moveToBookingShopHouse(object) {\r\n    var self = this;\r\n    this.getShopProducts(object, function () {\r\n      if (self.data_shop_house['group_2'].length > 0) {\r\n        self.data_shop_house['group_2'][0]['data'][0].number = 1;\r\n        localStorage.setItem('data-shop-house', JSON.stringify(self.data_shop_house));\r\n        this.goToPageBookingShopHouse();\r\n      }\r\n    });\r\n  }\r\n  async goToPageBookingShopHouse() {\r\n    const modal = await this.modalController.create({\r\n      component: BookingShopHousePage,\r\n      cssClass: 'booking-shop-house-modal-css',\r\n    });\r\n    return await modal.present();\r\n  }\r\n\r\n  getShopProducts(objectShop, callBack) {\r\n    const self = this;\r\n    this.data_shop_house = {};\r\n    this.data_shop_house['carServiceType'] = objectShop.carServiceType;\r\n    this.data_shop_house['group_1'] = [];\r\n    this.data_shop_house['group_2'] = [];\r\n    this.loading.present();\r\n    this.apiService.getDataServiceShopProduct(objectShop._id).subscribe(\r\n      (result) => {\r\n        let data_shop_product = result.shopProducts;\r\n        data_shop_product.forEach((product) => {\r\n          if (product.requestShopProduct) {\r\n            self.data_shop_house['_id'] = product.requestShopProduct._id;\r\n            self.data_shop_house['text_title'] = product.requestShopProduct.title;\r\n            if (product.requestShopProduct.apartment) {\r\n              self.data_shop_house['text_place'] =\r\n                product.requestShopProduct.apartment.title + ' - ' + product.requestShopProduct.apartment.campaign.title;\r\n            } else {\r\n              self.data_shop_house['text_place'] = 'AMO';\r\n            }\r\n            self.data_shop_house['text_star_rate'] = product.requestShopProduct.stars;\r\n            let thumbnail = product.requestShopProduct.thumbnail;\r\n            let logo = product.requestShopProduct.thumbnail;\r\n            if (product.requestShopProduct.attachments && product.requestShopProduct.attachments.length > 1) {\r\n              logo = product.requestShopProduct.attachments[0].url;\r\n              thumbnail = product.requestShopProduct.attachments[1].url;\r\n            }\r\n            self.data_shop_house['thumbnail'] = thumbnail;\r\n            self.data_shop_house['logo'] = logo;\r\n            let time_open = 'Luôn mở cửa';\r\n            if (product.requestShopProduct.timeOpen) {\r\n              time_open = product.requestShopProduct.timeOpen;\r\n            }\r\n            self.data_shop_house['time_open'] = time_open;\r\n            if (product.promotionCodes && product.promotionCodes.length > 0 && product.promotionCodes[0].type == 'groupon') {\r\n              let promotionCodes = product.promotionCodes[0];\r\n              let deadline_convert = '';\r\n              if (promotionCodes.endAt) {\r\n                let today = new Date();\r\n                let endAt = new Date(promotionCodes.endAt);\r\n                var ageDate = Math.abs(endAt.getTime() - today.getTime());\r\n                let deadline = Math.ceil(ageDate / (1000 * 3600 * 24));\r\n                deadline = deadline ? deadline : 0;\r\n                deadline_convert = deadline == 0 ? 'Khuyến mại' : 'Còn ' + deadline + '   ngày';\r\n              }\r\n\r\n              let title = product.title;\r\n              let money = product.price;\r\n              if (product.discountProducts && product.discountProducts.length > 0) {\r\n                let today = new Date();\r\n                let startAt = new Date(product.discountProducts[0].startAt);\r\n                let endAt = new Date(product.discountProducts[0].endAt);\r\n                if (startAt <= today && today <= endAt) {\r\n                  money = product.discountProducts[0].discountValue;\r\n                }\r\n              }\r\n\r\n              let slider_value = (promotionCodes.numberOrder * 100) / promotionCodes.promotion2;\r\n              let range_position_value = (promotionCodes.promotion1 * 100) / promotionCodes.promotion2;\r\n              let discount = 0;\r\n              if (promotionCodes.numberOrder >= promotionCodes.promotion1 && promotionCodes.numberOrder < promotionCodes.promotion2) {\r\n                discount = promotionCodes.promotionPercent1 / 100;\r\n              } else if (promotionCodes.numberOrder == promotionCodes.promotion2) {\r\n                discount = promotionCodes.promotionPercent2 / 100;\r\n              }\r\n              money = money - money * discount;\r\n              let detail = promotionCodes.title;\r\n              let actual_order = promotionCodes.numberOrder + '/' + promotionCodes.promotion2;\r\n\r\n              let moc_1 = '-0%';\r\n              let moc_2 = '-' + promotionCodes.promotionPercent1 + '%';\r\n              let moc_3 = '-' + promotionCodes.promotionPercent2 + '%';\r\n              let background_image = '';\r\n              let object = {\r\n                _id: product._id,\r\n                _id_requestShopProduct: product.requestShopProduct._id,\r\n                thumbnail: product.thumbnail,\r\n                bg_url: '../assets/images/services/1.png',\r\n                deadline: deadline_convert,\r\n                title: title,\r\n                money: self.convertFormatMoney(money),\r\n                detail: detail,\r\n                excerpt: product.excerpt,\r\n                actual_order: actual_order,\r\n                slider_value: slider_value,\r\n                range_position_value: range_position_value,\r\n                moc_1: moc_1,\r\n                moc_2: moc_2,\r\n                moc_3: moc_3,\r\n                number: 0,\r\n                background_image: background_image,\r\n              };\r\n              self.data_shop_house.group_1.push(object);\r\n            } else {\r\n              let index = self.getIndexCategoryInList(product.category._id);\r\n              if (index < 0) {\r\n                self.data_shop_house['group_2'].push({\r\n                  id_tab: product.category._id,\r\n                  title: product.category.title,\r\n                  data: [],\r\n                });\r\n                index = self.data_shop_house['group_2'].length - 1;\r\n              }\r\n              let title = product.title;\r\n              let money = product.price;\r\n              if (product.discountProducts && product.discountProducts.length > 0) {\r\n                let today = new Date();\r\n                let startAt = new Date(product.discountProducts[0].startAt);\r\n                let endAt = new Date(product.discountProducts[0].endAt);\r\n                if (startAt <= today && today <= endAt) {\r\n                  money = product.discountProducts[0].discountValue;\r\n                }\r\n              }\r\n              let object = {\r\n                _id: product._id,\r\n                image: product.thumbnail,\r\n                title: title,\r\n                money: self.convertFormatMoney(money),\r\n                note: product.excerpt,\r\n                number: 0,\r\n              };\r\n              self.data_shop_house.group_2[index].data.push(object);\r\n            }\r\n          }\r\n        });\r\n        self.loading.dismiss();\r\n        callBack();\r\n      },\r\n      (error) => {\r\n        self.loading.dismiss();\r\n        callBack();\r\n      }\r\n    );\r\n  }\r\n  getIndexCategoryInList(id_tab) {\r\n    var self = this;\r\n    let index = -1;\r\n    let index_value = -1;\r\n    self.data_shop_house.group_2.forEach((object) => {\r\n      index++;\r\n      if (object.id_tab == id_tab) {\r\n        index_value = index;\r\n      }\r\n    });\r\n    return index_value;\r\n  }\r\n  convertFormatMoney(value) {\r\n    if (value.toString() == '') {\r\n      return '';\r\n    }\r\n    value = value.toString();\r\n    let convert1 = '';\r\n    let convert2 = '';\r\n    let count1 = value.length;\r\n    for (let i = 1; i <= count1; i++) {\r\n      if (i % 3 == 0 && i != count1) {\r\n        convert1 = convert1 + value[count1 - i] + '.';\r\n      } else {\r\n        convert1 = convert1 + value[count1 - i];\r\n      }\r\n    }\r\n    let count2 = convert1.length;\r\n    for (let i = 1; i <= count2; i++) {\r\n      convert2 = convert2 + convert1[count2 - i];\r\n    }\r\n    return convert2;\r\n  }\r\n  categoryClick(cateId: string) {\r\n    this.selected_category = cateId;\r\n    this.shopTagSelect = [];\r\n    this.currentPageSearch = 1;\r\n    this.listDataMarket = [];\r\n    this.searchShopByTagsAndCateV2();\r\n  }\r\n  shopTagClick(tagId: string) {\r\n    console.warn(tagId);\r\n\r\n    const tagIndex = this.shopTagSelect.findIndex((item) => item == tagId);\r\n    if (tagIndex != -1) {\r\n      this.shopTagSelect.splice(tagIndex, 1);\r\n    } else {\r\n      this.shopTagSelect.push(tagId);\r\n    }\r\n    this.listDataMarket = [];\r\n    this.currentPageSearch = 1;\r\n    this.searchShopByTagsAndCateV2();\r\n  }\r\n\r\n  searchShopByTagsAndCateV2(event = null) {\r\n    this.loading.present();\r\n    this.apiService\r\n      .searchShopByTagsAndCateV2(this.currentPageSearch, this.numberRecordOnPage, this.shopTagSelect, [this.selected_category], this.orderMode)\r\n      .subscribe(\r\n        (result) => {\r\n          const data_shop_product = result.shopHousesV2;\r\n          this.mappingShopProduct(data_shop_product);\r\n          this.loading.dismiss();\r\n          if (event) {\r\n            event.target.complete();\r\n          }\r\n        },\r\n        (error) => {\r\n          this.loading.dismiss();\r\n          if (event) {\r\n            event.target.complete();\r\n          }\r\n        }\r\n      );\r\n  }\r\n  mappingShopProduct(data_shop_product: any) {\r\n    data_shop_product.forEach((product) => {\r\n      let text_note = product.promotionKM ? product.promotionKM : '';\r\n      if (text_note && text_note != 'KM') {\r\n        text_note = '-' + text_note;\r\n      } else if (text_note == 'KM') {\r\n        text_note = this.translate.instant('SHOP_BY_CATE.promotion');\r\n      }\r\n      let type_note = product.promotionKM == 'KM' ? 2 : 1;\r\n      let text_place = 'AMO';\r\n      if (product.apartment) {\r\n        text_place = product.apartment.title + ' - ' + product.apartment.campaign.title;\r\n      }\r\n      let text_tag = product.promotion ? product.promotion : '';\r\n      const content = product.promotion || product.content.replace(/(<([^>]+)>)/gi, '');\r\n      let thumbnailUrl = product.thumbnail;\r\n      if (!thumbnailUrl && product.attachments && product.attachments.length > 1) {\r\n        thumbnailUrl = product.attachments[1].url;\r\n      }\r\n      const shopHouseTagList = product.shopHouseTag.map((item) => {\r\n        const tagSelect = this.shopTagSelect.find((tag) => tag == item._id);\r\n        if (tagSelect) {\r\n          item.isSelected = true;\r\n        } else {\r\n          item.isSelected = false;\r\n        }\r\n        return item;\r\n      });\r\n      this.listDataMarket.push({\r\n        _id: product._id,\r\n        thumbnail: thumbnailUrl ? thumbnailUrl : 'assets/common/no-thumbnail.png',\r\n        title: product.title,\r\n        text_note: text_note,\r\n        type_note: type_note,\r\n        text_place: text_place,\r\n        text_star_rate: product.stars,\r\n        text_tag: text_tag,\r\n        carServiceType: product.carServiceType,\r\n        time_open: product.timeOpen || '',\r\n        content: content,\r\n        numberOrder: product.numberOrder || 0,\r\n        numberEvaluation: product.numberEvaluation || 0,\r\n        shopHouseTag: shopHouseTagList,\r\n        lowestPrice: product.lowestPrice\r\n      });      \r\n    });\r\n  }\r\n\r\n  searchByTag(tagType: number) {\r\n    const selectedTag = this.listSearchTag.find(el => el.value === tagType);\r\n    if (selectedTag.selected === true) {\r\n      selectedTag.selected = false;\r\n      this.orderMode = undefined;\r\n      this.listDataMarket = [];\r\n      this.currentPageSearch = 1;\r\n    } else if (selectedTag.selected == false) {\r\n      this.unselectSearchTag(tagType);\r\n      selectedTag.selected = true\r\n      this.orderMode = tagType;\r\n      this.listDataMarket = [];\r\n      this.currentPageSearch = 1;\r\n    } else {\r\n      return;\r\n    }\r\n    this.searchShopByTagsAndCateV2();\r\n  }\r\n\r\n  private unselectSearchTag(val) {\r\n    this.listSearchTag.forEach(element => {\r\n      if (element.value !== val) {\r\n        element.selected = false;\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { UserShopByCategoryPage } from './user-shop-by-category.page';\r\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\r\nimport { MatTabsModule } from '@angular/material/tabs';\r\nimport { SuperTabsModule } from '@ionic-super-tabs/angular';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: UserShopByCategoryPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    MatTabsModule,\r\n    SuperTabsModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [UserShopByCategoryPage]\r\n})\r\nexport class UserShopByCategoryPageModule {}\r\n\r\n"]}