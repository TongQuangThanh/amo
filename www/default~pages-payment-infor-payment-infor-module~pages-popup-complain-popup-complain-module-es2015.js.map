{"version":3,"sources":["./src/app/pages/popup-complain/popup-complain.page.ts","./src/app/pages/popup-complain/popup-complain.page.html"],"names":[],"mappings":"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","file":"default~pages-payment-infor-payment-infor-module~pages-popup-complain-popup-complain-module-es2015.js","sourcesContent":["import { ModalController } from '@ionic/angular';\r\nimport { TranslateConfigService } from '../../translate-config.service';\r\nimport { Component, OnInit, OnDestroy, ViewChild, AfterViewInit, Input, ElementRef } from '@angular/core';\r\nimport { ApiService } from '../../services/api/api.service';\r\nimport { ActionSheetController, NavController, NavParams, Platform } from '@ionic/angular';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { LoadingService } from '../../services/loading/loading.service';\r\nimport { ConstService } from '../../utils/const.service';\r\nimport { UtilsService } from '../../utils/utils.service';\r\nimport { AlertService } from '../../services/alert/alert.service';\r\nimport { Camera, CameraOptions, PictureSourceType } from '@ionic-native/Camera/ngx';\r\nimport { AuthService } from 'src/app/services/auth/auth.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\n@Component({\r\n  selector: 'app-popup-complain',\r\n  templateUrl: './popup-complain.page.html',\r\n  styleUrls: ['./popup-complain.page.scss'],\r\n})\r\nexport class PopupComplainPage implements OnInit {\r\n  selectedLanguage:string;\r\n  @ViewChild('content') content: any;\r\n  @ViewChild(\"chat_input\") inputField: ElementRef;\r\n  \r\n  data_chat: any;\r\n  list_image_select: any;\r\n  flag_user: any;\r\n\r\n  defineHeightScreen:number;\r\n  widthListScreen:number;\r\n  listPaymentComment: any;\r\n  paymentBillID:string;\r\n  heightScreen:number;\r\n  editorMsg:any;\r\n  userID: any;\r\n\r\n  constructor(\r\n    private translateConfigService: TranslateConfigService,\r\n    private modalController: ModalController,\r\n    private platform: Platform,\r\n    private loading: LoadingService,\r\n    private apiService: ApiService,\r\n    private navCtrl: NavController,\r\n    private navParams: NavParams,\r\n    private authService: AuthService,\r\n    private camera: Camera,\r\n    public actionSheetController: ActionSheetController,\r\n    private alertService: AlertService,\r\n    private translate: TranslateService,\r\n    private route: ActivatedRoute) { \r\n      this.selectedLanguage = this.translateConfigService.getDefaultLanguage();\r\n      var self = this;\r\n      platform.ready().then((readySource) => {\r\n        self.widthListScreen = platform.width() * 0.8;\r\n        self.heightScreen = platform.height() * 0.55;\r\n        self.defineHeightScreen = this.heightScreen;\r\n      });\r\n      UtilsService.requestDetailComponentShare = this;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.paymentBillID = this.navParams.data.id;\r\n    this.flag_user = \"\";\r\n    this.data_chat = [];\r\n    this.editorMsg = \"\";\r\n    this.list_image_select = [];\r\n    const profile = this.authService.getProfile();\r\n    if (profile && profile._id) {\r\n      this.userID = profile._id;\r\n    } else {\r\n      this.userID = \"\";\r\n    }\r\n    this.getPaymentComment();\r\n    \r\n  }\r\n\r\n  getPaymentComment() {\r\n    this.loading.present();\r\n    const self = this;\r\n    this.apiService.getListPaymentComment(this.paymentBillID)\r\n      .subscribe(result => {\r\n        self.loading.dismiss();\r\n        self.listPaymentComment = result.paymentComments;\r\n        self.listPaymentComment.forEach(product => {\r\n          let type = 'left';\r\n          if (product.createdBy._id == self.userID) {\r\n            type = 'right';\r\n          }\r\n          if (product.attachments.length > 0) {\r\n            product.attachments.forEach(attachments => {\r\n              let object = {\r\n                type: type, \r\n                avatar: product.createdBy.avatar || '../assets/icon/avatar-default.png', \r\n                message: \"\", \r\n                images: attachments.url\r\n              }\r\n              self.data_chat.push(object);\r\n            })\r\n          } else {\r\n            let object = {\r\n              type: type, \r\n              avatar: product.createdBy.avatar || '../assets/icon/avatar-default.png', \r\n              message: product.content, \r\n              images: \"\"\r\n            }\r\n            self.data_chat.push(object);\r\n          }\r\n        });\r\n        self.scrollToBottom();\r\n    },\r\n    error => {\r\n      self.loading.dismiss();\r\n    });\r\n  }\r\n\r\n  sendMsg(){\r\n    this.loading.present();\r\n    const self = this;\r\n    const params = {\r\n      content: this.editorMsg,\r\n      attachments: [],\r\n      bill: this.paymentBillID\r\n    }\r\n    this.apiService.sendPaymentComment(params)\r\n      .subscribe(result => {\r\n        self.data_chat.push(\r\n          {type: 'right', avatar: \"\", message: self.editorMsg}\r\n        )\r\n        self.loading.dismiss();\r\n        self.editorMsg = \"\";\r\n        self.scrollToBottom();\r\n    },\r\n    error => {\r\n      self.editorMsg = \"\";\r\n      self.loading.dismiss();\r\n    });\r\n  }\r\n\r\n  scrollToBottom() {\r\n    var self = this;\r\n    setTimeout(() => {\r\n      if (self.content.scrollToBottom) {\r\n        self.content.scrollToBottom();\r\n      }\r\n    }, 400)\r\n  }\r\n\r\n  getMarginTop(message) {\r\n    if (this.flag_user != message.type) {\r\n      this.flag_user = message.type;\r\n      return 'margin-top-20';\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  eventSendImage() {\r\n    var self = this;\r\n    let listAttachments = [];\r\n    let data_chat_image = [];\r\n    for(var i=0;i<self.list_image_select.length;i++){\r\n      listAttachments.push(self.list_image_select[i].media);\r\n      data_chat_image.push({\r\n        type: 'right', avatar: \"\", message: \"\", images: self.list_image_select[i].media.url\r\n      });\r\n    }\r\n    var param = {\r\n      content: \" \",\r\n      bill: this.paymentBillID,\r\n      attachments: listAttachments\r\n    }\r\n    if (listAttachments.length == 0) return;\r\n    this.loading.present();\r\n    this.apiService.sendPaymentComment(param)\r\n      .subscribe(result => {\r\n        self.data_chat = self.data_chat.concat(data_chat_image);\r\n        self.list_image_select = [];\r\n        self.scrollToBottom();\r\n        self.loading.dismiss();\r\n    },\r\n    error => {\r\n      self.loading.dismiss();\r\n      self.alertService.presentToast('Send image fail');\r\n    });\r\n  }\r\n\r\n  // select image\r\n  async selectImage() {\r\n    const actionSheet = await this.actionSheetController.create({\r\n      header: this.translate.instant('COMMON.form_select_image_title'),\r\n      buttons: [{\r\n        text: this.translate.instant('COMMON.form_select_image_library'),\r\n        handler: () => {\r\n          this.checkPicturePermission(this.camera.PictureSourceType.PHOTOLIBRARY);\r\n        }\r\n      },\r\n      {\r\n        text: this.translate.instant('COMMON.form_select_image_camera'),\r\n        handler: () => {\r\n          this.checkPicturePermission(this.camera.PictureSourceType.CAMERA);\r\n        }\r\n      },\r\n      {\r\n        text: this.translate.instant('COMMON.form_select_image_cancel'),\r\n        role: 'cancel'\r\n      }\r\n      ]\r\n    });\r\n    await actionSheet.present();\r\n  }\r\n\r\n  checkPicturePermission(sourceType : PictureSourceType) {\r\n    this.pickImage(sourceType);\r\n  }\r\n\r\n  blobToFile = (theBlob: Blob, fileName:string): any => {\r\n    var b: any = theBlob;\r\n    //A Blob() is almost a File() - it's just missing the two properties below which we will add\r\n    b.lastModifiedDate = new Date();\r\n    b.name = fileName;\r\n\r\n    //Cast to a File() type\r\n    return theBlob;\r\n  }\r\n\r\n  pickImage(sourceType) {\r\n    var self = this;\r\n    const options: CameraOptions = {\r\n      quality: 80,\r\n      sourceType: sourceType,\r\n      destinationType: this.camera.DestinationType.DATA_URL,\r\n      encodingType: this.camera.EncodingType.JPEG,\r\n      mediaType: this.camera.MediaType.PICTURE,\r\n      targetWidth: 800,\r\n      targetHeight: 800,\r\n      correctOrientation: true,\r\n    }\r\n    \r\n    this.camera.getPicture(options).then((imageData) => {\r\n      const base64Define = 'data:image/jpeg;base64,';\r\n      var binaryBlob = this.convertBase64ToBlob(base64Define+imageData);\r\n      const date = new Date().valueOf();\r\n      const formData = new FormData();\r\n      var fileName = \"amoapp\" + date + \".jpg\";\r\n      var myFile = self.blobToFile(binaryBlob, fileName);\r\n      const payload = new FormData();\r\n      payload.append('media', binaryBlob, fileName);\r\n      \r\n      this.apiService.uploadImage(payload)\r\n      .subscribe(result => {\r\n        self.list_image_select = [];\r\n        self.list_image_select.push(result);\r\n        self.eventSendImage();\r\n      },\r\n        error => {\r\n      });\r\n    }, (err) => {\r\n      // Handle error\r\n      // alert(err);\r\n    });\r\n  }\r\n\r\n  private convertBase64ToBlob(base64: string) {\r\n    const info = this.getInfoFromBase64(base64);\r\n    const sliceSize = 512;\r\n    const byteCharacters = window.atob(info.rawBase64);\r\n    const byteArrays = [];\r\n\r\n    for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\r\n      const slice = byteCharacters.slice(offset, offset + sliceSize);\r\n      const byteNumbers = new Array(slice.length);\r\n\r\n      for (let i = 0; i < slice.length; i++) {\r\n        byteNumbers[i] = slice.charCodeAt(i);\r\n      }\r\n\r\n      byteArrays.push(new Uint8Array(byteNumbers));\r\n    }\r\n\r\n    return new Blob(byteArrays, { type: info.mime });\r\n  }\r\n\r\n  private getInfoFromBase64(base64: string) {\r\n    const meta = base64.split(',')[0];\r\n    const rawBase64 = base64.split(',')[1].replace(/\\s/g, '');\r\n    const mime = /:([^;]+);/.exec(meta)[1];\r\n    const extension = /\\/([^;]+);/.exec(meta)[1];\r\n\r\n    return {\r\n      mime,\r\n      extension,\r\n      meta,\r\n      rawBase64\r\n    };\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  closeModal() {\r\n    this.modalController.dismiss();\r\n  }\r\n}\r\n","<ion-content class=\"content-wrap\" no-bounce>\r\n  <div class=\"content-container\">\r\n    <ion-item lines=\"none\" class=\"header-item ion-no-padding\">\r\n      <ion-title class=\"popup-title\">{{ 'PAYMENT_COMMENT.title' | translate }}</ion-title>\r\n      <ion-buttons slot=\"end\" (click)=\"closeModal()\" class=\"btn-close-popup\">\r\n        <ion-icon name=\"close\"></ion-icon>\r\n      </ion-buttons>\r\n    </ion-item>\r\n    <ion-content #content class=\"list-chat-content\">\r\n      <ion-list lines=\"full\" class=\"ion-no-margin ion-no-padding padding-top-10 padding-bottom-20 ion-list-class\">\r\n        <ion-item *ngFor=\"let message of data_chat\" class=\"ion-item-message {{getMarginTop(message)}}\">\r\n          <div *ngIf=\"message.type == 'left' && (message.message != '' || message.images != '')\" class=\"div-avatar\">\r\n            <ion-avatar> <img src=\"{{message.avatar}}\"></ion-avatar>\r\n          </div>\r\n          <div *ngIf=\"message.type == 'left' && message.message != ''\" class=\"col-7\">\r\n            <ion-label class=\"label-message-left-bql\">{{ 'PAYMENT_COMMENT.bql' | translate }}</ion-label>\r\n            <div class=\"div-label-message-left\">\r\n              <ion-label class=\"label-message-left\">{{message.message}}</ion-label>\r\n            </div>\r\n          </div>\r\n          <div *ngIf=\"message.type == 'left' && message.message == '' && message.images != ''\" class=\"col-7 div-image-message-left\">\r\n            <ion-label class=\"label-message-left-bql\">{{ 'PAYMENT_COMMENT.bql' | translate }}</ion-label>\r\n            <img class=\"\" src=\"{{message.images}}\"/>\r\n          </div>\r\n          <div *ngIf=\"message.type == 'right' && message.message != ''\" class=\"col-7 div-label-message-right\" slot=\"end\">\r\n            <ion-label class=\"label-message-right\">{{message.message}}</ion-label>\r\n          </div>\r\n          <div *ngIf=\"message.type == 'right' && message.message == '' && message.images != ''\" class=\"col-7 div-image-message-right\" slot=\"end\">\r\n            <img class=\"\" src=\"{{message.images}}\"/>\r\n          </div>\r\n        </ion-item>\r\n      </ion-list>\r\n    </ion-content>\r\n  </div>\r\n</ion-content>\r\n<ion-footer class=\"ion-no-border footer-content\">\r\n  <ion-item lines=\"none\" class=\"add-comment-item\">\r\n    <div class=\"div-select-image\" (click)=\"selectImage()\">\r\n      <ion-icon name=\"image\" slot=\"start\" class=\"add-image-icon\"></ion-icon>\r\n    </div>\r\n    <ion-textarea class=\"input-area\" #chat_input\r\n      rows=\"1\" wrap=\"soft\" maxlength=\"500\"\r\n      [(ngModel)]=\"editorMsg\" \r\n      auto-grow\r\n      placeholder=\"{{ 'REQUEST_DETAIL.place_holder_input' | translate }}\">\r\n      <ion-icon name=\"paper-plane\" class=\"icon-send icon-send-default\" (click)=\"sendMsg()\"></ion-icon>\r\n    </ion-textarea>    \r\n  </ion-item>\r\n</ion-footer>\r\n"],"sourceRoot":"webpack:///"}