{"version":3,"sources":["./src/app/pages/landing/landing.page.ts","./src/app/pages/landing/landing.page.html","./src/app/pages/landing/landing.module.ts"],"names":[],"mappings":"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","file":"pages-landing-landing-module-es2015.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { MenuController, NavController } from '@ionic/angular';\r\nimport { AuthService } from 'src/app/services/auth/auth.service';\r\nimport { TranslateConfigService } from '../../translate-config.service';\r\nimport { NavigationExtras } from '@angular/router';\r\nimport { ApiService } from '../../services/api/api.service';\r\nimport { LoadingService } from '../../services/loading/loading.service';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { PopupPincodeRegisterPage } from '../popup-pincode-register/popup-pincode-register.page';\r\n\r\nconst PHONE_LENGTH_VN = 10;\r\n\r\n@Component({\r\n  selector: 'app-landing',\r\n  templateUrl: './landing.page.html',\r\n  styleUrls: ['./landing.page.scss'],\r\n})\r\nexport class LandingPage implements OnInit {\r\n  phoneNumber: string;\r\n  errorInputPhone: boolean;\r\n  errorMessage:string;\r\n  refCode :string;\r\n  constructor(\r\n    private menu: MenuController,\r\n    private loading: LoadingService,\r\n    private authService: AuthService,\r\n    private navCtrl: NavController,\r\n    private translateConfigService: TranslateConfigService,\r\n    private apiService: ApiService,\r\n    public modalController: ModalController,\r\n  ) {\r\n    this.phoneNumber = '';\r\n    this.errorMessage= \"\";\r\n    this.errorInputPhone = false;\r\n    this.menu.enable(false);\r\n    this.navCtrl.setDirection('back', true, 'back');\r\n\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n    var self = this;\r\n    this.authService.getToken();\r\n    if (this.authService.isLoggedIn) {\r\n      this.loading.present();\r\n      this.apiService.getUserProfile()\r\n        .subscribe(result => {\r\n          localStorage.setItem('profile', JSON.stringify(result.profile));\r\n          self.loading.dismiss()\r\n          self.navCtrl.navigateRoot('/dashboard/home');\r\n      },\r\n      error => {\r\n        self.loading.dismiss();\r\n        self.authService.logout();\r\n      });\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n  checkIsEnabled() {\r\n    if (this.phoneNumber && this.phoneNumber.length >= PHONE_LENGTH_VN) {\r\n      this.errorInputPhone = false;\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  ChangeLogin() {\r\n    //this.navCtrl.navigateForward('/login/' + this.phoneNumber);\r\n    this.navCtrl.navigateForward('/login/');\r\n  }\r\n\r\n  sendSMS(){\r\n    var self = this;\r\n    this.loading.present();\r\n    this.apiService.resentRegisterCode(this.phoneNumber).subscribe(result => {\r\n      self.loading.dismiss();\r\n      self.refCode = result.ref;\r\n      self.presentModal();\r\n    },\r\n    error => {\r\n      self.errorMessage = error.error.message;\r\n      self.loading.dismiss();\r\n    });\r\n  }\r\n\r\n  SkipLogin(){\r\n    if (this.phoneNumber && this.phoneNumber.length >= PHONE_LENGTH_VN) {\r\n      this.errorInputPhone = false;\r\n      this.sendSMS();\r\n    }else{\r\n      this.errorInputPhone = true;\r\n    }\r\n  }\r\n\r\n  async presentModal() {\r\n    const modal = await this.modalController.create({\r\n      component: PopupPincodeRegisterPage,\r\n      componentProps: {\r\n        \"phoneNumber\": this.phoneNumber,\r\n        \"refCode\": this.refCode\r\n      },\r\n      cssClass: \"pincode-modal-custom\"\r\n    });\r\n\r\n    modal.onDidDismiss().then((dataReturned:any) => {\r\n      if (dataReturned !== null) {\r\n        const dataReturnedResult = JSON.parse(dataReturned.data);\r\n        if(dataReturnedResult.result == '0'){\r\n          this.navCtrl.navigateForward('/register-password/' + this.phoneNumber + \"/\" + dataReturnedResult.token + \"/\" + dataReturnedResult.refCode);\r\n        }else{\r\n\r\n        }\r\n      }\r\n    });\r\n\r\n    return await modal.present();\r\n  }\r\n}\r\n","<div class=\"image-logo\">\r\n  <div class=\"center\">\r\n    <ion-img src=\"/assets/icon/AMO_Logo_WhiteBgr.png\" class=\"ion-align-self-end\"></ion-img>\r\n  </div>   \r\n</div>\r\n\r\n<div class=\"landing-white-bg\">\r\n  <div class=\"ion-text-center\">\r\n    <ion-label class=\"label-text-title\">{{ 'LANDING.content_text_title' | translate }}</ion-label>\r\n  </div>\r\n  <div class=\"ion-text-center landing-text\">\r\n    <ion-label class=\"label-text\">{{ 'LANDING.content_text' | translate }}</ion-label>\r\n  </div>\r\n  <ion-button expand=\"block\" class=\"button-common button-next button-common-active\" (click)=\"ChangeLogin()\">\r\n    <ion-label class=\"button-next-label\">{{ 'LANDING.login' | translate }}</ion-label>\r\n  </ion-button>\r\n  <ion-button expand=\"block\" class=\"button-common button-next\" (click)=\"SkipLogin()\">\r\n    <ion-label class=\"button-skip-label\">{{ 'LANDING.skip' | translate }}</ion-label>\r\n  </ion-button>\r\n</div>\r\n<ion-img class=\"image-footer\" src=\"/assets/icon/splash-page.svg\"></ion-img>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { LandingPage } from './landing.page';\r\n// import { LoginPage } from '../auth/login/login.page';\r\n// import { RegisterPage } from '../auth/register/register.page';\r\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LandingPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [LandingPage],\r\n  // entryComponents: [LoginPage, RegisterPage]\r\n})\r\nexport class LandingPageModule {}\r\n"],"sourceRoot":"webpack:///"}