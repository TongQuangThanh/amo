{"version":3,"sources":["webpack:///src/app/pages/my-home/my-home.page.html","webpack:///src/app/pages/my-home/my-home.page.ts","webpack:///src/app/pages/my-home/my-home.module.ts"],"names":["MyHomePage","modalController","loading","navCtrl","apiService","callNumber","getListUserApar","self","present","getListUserApartment","subscribe","result","listDepartment","userApartments","dismiss","error","event","navigateForward","currentTarget","id","stopPropagation","item","_id","parentElement","campaignPhone","campaign","phone","then","res","console","log","err","$event","phoneNumber","create","component","componentProps","cssClass","modal","addNewHome","selector","templateUrl","styleUrls","routes","path","MyHomePageModule","forChild","imports","providers","declarations"],"mappings":"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","file":"pages-my-home-my-home-module-es5.js","sourcesContent":["\r\n<ion-header class=\"ion-no-border my-home-header\">\r\n  <ion-buttons class=\"back-button\">\r\n    <ion-back-button color=\"light\" text=\"\" icon=\"chevron-back\" class=\"ion-back-button\"></ion-back-button>\r\n  </ion-buttons>\r\n  <ion-label class=\"header-title\">{{ 'MY_HOME.title' | translate }}</ion-label>\r\n  <ion-label class=\"header-sub-title\">{{ 'MY_HOME.subtitle' | translate }}</ion-label>\r\n  <div class=\"header-radius\"></div>\r\n</ion-header>\r\n\r\n<ion-content class=\"main-content\">\r\n  <ion-list class=\"list-content\">\r\n    <ion-card class=\"card-content\" *ngFor=\"let item of listDepartment; let i = index\" (click)=\"detailPage($event)\" id=\"{{item._id}}\">\r\n      <ion-text class=\"number-watermark ion-float-right\">\r\n        <h1 class=\"number-watermark-text\">{{i <= 9 ? \"0\"+ (i +1): (i+1)}}</h1>\r\n      </ion-text>\r\n      <ion-card-header>\r\n        <ion-item lines=\"none\" class=\"hotline-item\">\r\n          <ion-card-title class=\"home-title\">{{item.apartment.title + ' - ' + item.campaign.title}}</ion-card-title>\r\n          <ion-button class=\"modify-icon\" expand=\"block\" fill=\"clear\" shape=\"round\">\r\n            <img src=\"../assets/icon/svg/modify.svg\"/>\r\n          </ion-button>\r\n        </ion-item>\r\n      </ion-card-header>\r\n      <ion-card-content class=\"home-content\">\r\n        <ion-label class=\"home-address\">{{item.campaign.address}}</ion-label>\r\n        <ion-item lines=\"none\" class=\"hotline-item\">\r\n          <ion-label class=\"hotline-title\">{{ 'MY_HOME.hotline_label' | translate }}</ion-label>\r\n          <ion-button slot=\"end\" class=\"hotline-number clear-background\" (click)=\"buildingManagementPhoneModal($event, item.campaign.phone)\">\r\n            <ion-icon class=\"hotline-icon\" src=\"assets/icon/home/calling.svg\"></ion-icon>\r\n            {{item.campaign.phone}}\r\n          </ion-button>\r\n        </ion-item>\r\n      </ion-card-content>\r\n    </ion-card>\r\n    <ion-card class=\"add-new-button\" (click)=\"addNewHome()\">\r\n      <div class=\"add-new-icon\" >\r\n        <div class=\"margin-top-20\"><img src=\"../assets/icon/add.svg\"/></div>\r\n        <div><ion-label class=\"add-new-label\">{{ 'MY_HOME.button_add' | translate }}</ion-label></div>\r\n      </div>\r\n    </ion-card>\r\n  </ion-list>\r\n</ion-content>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ApiService } from '../../services/api/api.service';\r\nimport { NavController } from '@ionic/angular';\r\nimport { LoadingService } from '../../services/loading/loading.service';\r\nimport { CallNumber } from '@ionic-native/call-number/ngx';\r\nimport { ModalController } from '@ionic/angular';\r\n\r\nimport { ApartmentCodeRegisterPage } from '../auth/apartment-code-register/apartment-code-register.page';\r\nimport { PopupBuildingManagementPhonePage } from '../popup-building-management-phone/popup-building-management-phone.page';\r\n\r\n@Component({\r\n  selector: 'app-my-home',\r\n  templateUrl: './my-home.page.html',\r\n  styleUrls: ['./my-home.page.scss'],\r\n})\r\nexport class MyHomePage implements OnInit {\r\n  departmentID:string;\r\n  listDepartment: any;\r\n\r\n  constructor(\r\n    public modalController: ModalController,\r\n    private loading: LoadingService,\r\n    private navCtrl: NavController,\r\n    private apiService: ApiService,\r\n    private callNumber: CallNumber\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n  ionViewWillEnter() {\r\n    this.getListUserApar();\r\n  }\r\n\r\n  getListUserApar(){\r\n    var self = this;\r\n    this.loading.present();\r\n    this.apiService.getListUserApartment()\r\n      .subscribe(result => {\r\n        self.listDepartment = result.userApartments;\r\n        self.loading.dismiss()\r\n    },\r\n    error => {\r\n      self.loading.dismiss();\r\n    });\r\n  }\r\n\r\n  detailPage(event) {\r\n    // // this.nativePageTransitions.slide(ConstService.ANIMATION_OPTION_LEFT);\r\n    this.navCtrl.navigateForward('/my-home-detail/' + event.currentTarget.id);\r\n  }\r\n\r\n  callEmergency(event){\r\n    if (event && event.stopPropagation) {\r\n      event.stopPropagation();\r\n    }\r\n    for(let item in this.listDepartment){\r\n      if (this.listDepartment[item]._id == event.currentTarget.parentElement.parentElement.parentElement.id){\r\n        const campaignPhone = this.listDepartment[item].campaign.phone;\r\n        this.callNumber.callNumber(campaignPhone, true)\r\n        .then(res => console.log('Launched dialer!', res))\r\n        .catch(err => console.log('Error launching dialer', err));\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  // async addApartment() {\r\n  //   const modal = await this.modalController.create({\r\n  //     component: ApartmentCodeRegisterPage,\r\n  //     componentProps: {\r\n  //     },\r\n  //     cssClass: \"custom-modal-wrapper\"\r\n  //   });\r\n\r\n  //   modal.onDidDismiss().then((dataReturned:any) => {\r\n  //     if (dataReturned !== null) {\r\n  //       const dataReturnedResult = JSON.parse(dataReturned.data);\r\n  //       if(dataReturnedResult.result == '0'){\r\n  //         this.getListUserApar();\r\n  //       }else{\r\n\r\n  //       }\r\n  //     }\r\n  //   });\r\n  //   return await modal.present();\r\n  // }\r\n\r\n  addNewHome(){\r\n    this.navCtrl.navigateForward('/add-home');\r\n  }\r\n\r\n  async buildingManagementPhoneModal($event, phoneNumber) {\r\n    $event.stopPropagation();\r\n    const modal = await this.modalController.create({\r\n      component: PopupBuildingManagementPhonePage,\r\n      componentProps: {\r\n        \"phoneNumber\": phoneNumber,\r\n      },\r\n      cssClass: 'buildingManagementPhone-custom-class'\r\n    });\r\n    return await modal.present();\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { MyHomePage } from './my-home.page';\r\nimport { CallNumber } from '@ionic-native/call-number/ngx';\r\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: MyHomePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  providers: [CallNumber],\r\n  declarations: [MyHomePage]\r\n})\r\nexport class MyHomePageModule {}\r\n"]}